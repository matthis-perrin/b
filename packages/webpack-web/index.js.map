{"version":3,"file":"index.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAqC;AACI;AAI0B;AACE;AACE;AACY;AACvB;AACa;AAC/B;AAEnC,SAASU,SAASA,CAACC,IAAuC,EAAiB;EAChF,MAAM;IAACC,OAAO;IAAEC;EAAK,CAAC,GAAGF,IAAI;EAC7B,MAAMG,IAAI,GAAGX,mFAAU,CAAC;IAACS,OAAO;IAAEC;EAAK,CAAC,CAAC;;EAEzC;EACA,MAAME,mBAAmB,GAAGb,+CAAI,CAACU,OAAO,EAAE,sBAAsB,CAAC;EACjE,MAAMI,qBAAqB,GAAI,GAAEf,mDAAQ,CAACW,OAAO,CAAC,CAACK,WAAW,CAAC,CAAE,yBAAwB;EACzF,MAAMC,KAAK,GAAG,IAAIC,MAAM,CACrB,gBAAeH,qBAAsB,8BAA6B,EACnE,GACF,CAAC,CAACI,IAAI,CAACpB,qDAAY,CAACe,mBAAmB,CAAC,CAACM,QAAQ,CAAC,CAAC,CAAC;EACpD,MAAMC,UAAU,GAAG,CAAAJ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,CAAC,CAAC,KAAI,kBAAkB;EACnD,MAAMK,SAAS,GAAI,OAAMd,0DAAM,CAAC,CAAC,GAAG,GAAG,GAAG,EAAG,MAAKa,UAAW,EAAC;EAE9D,OAAO;IACL,GAAGR,IAAI;IACPU,MAAM,EAAE,KAAK;IACbC,KAAK,EAAE;MAACC,IAAI,EAAExB,+CAAI,CAACU,OAAO,EAAE,eAAe;IAAC,CAAC;IAC7Ce,MAAM,EAAE;MACNC,IAAI,EAAE1B,+CAAI,CAACU,OAAO,EAAE,MAAM,CAAC;MAC3BiB,QAAQ,EAAG,yBAAwB;MACnCC,KAAK,EAAE,IAAI;MACXC,UAAU,EAAE;IACd,CAAC;IACDC,MAAM,EAAE;MACNC,KAAK,EAAE,CAAC7B,qFAAc,CAAC,CAAC,EAAEC,uFAAe,CAAC,CAAC;IAC7C,CAAC;IACD6B,OAAO,EAAE;MACPC,UAAU,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,CAAC;MAC1CC,OAAO,EAAE,CAAC,cAAc,EAAE,4BAA4B,EAAE,wBAAwB,CAAC;MACjFC,KAAK,EAAE;QACL,MAAM,EAAEnC,+CAAI,CAACU,OAAO,EAAE,KAAK,CAAC;QAC5B,SAAS,EAAEV,+CAAI,CAACU,OAAO,EAAE,eAAe,CAAC;QACzC,aAAa,EAAEV,+CAAI,CAACU,OAAO,EAAE,mBAAmB;MAClD;IACF,CAAC;IACD0B,OAAO,EAAE,CACP,IAAIxB,IAAI,CAACwB,OAAO,IAAI,EAAE,CAAC,EACvB/B,4EAAU,CAACK,OAAO,EAAEW,SAAS,CAAC,EAC9BjB,mGAAqB,CAACM,OAAO,EAAEW,SAAS,CAAC,CAC1C;IACDgB,SAAS,EAAE1B,KAAK,GAAGL,yFAAgB,CAACI,OAAO,CAAC,GAAG4B,SAAS;IACxDC,YAAY,EAAE;MACZ,GAAG3B,IAAI,CAAC2B,YAAY;MACpBC,WAAW,EAAE;QACXC,WAAW,EAAE;UACXC,MAAM,EAAE;YACNC,IAAI,EAAE,yBAAyB;YAC/BC,MAAM,EAAE,SAAS;YACjBC,IAAI,EAAE,QAAQ;YACdC,OAAO,EAAE;UACX;QACF;MACF;IACF;EACF,CAAC;AACH;;;;;;ACrEA;;;;;;ACAA;;;;;;;;;;;;;;;;ACEgE;AACA;AACgB;AAChB;AACJ;AAClB;AAEnC,SAAS7C,UAAUA,CAACQ,IAAuC,EAAiB;EACjF,MAAM;IAACC;EAAO,CAAC,GAAGD,IAAI;EAEtB,OAAO;IACL2C,IAAI,EAAE,MAAM;IACZ1C,OAAO;IACPa,KAAK,EAAE,CAAC,CAAC;IACT8B,OAAO,EAAE,YAAY;IACrBjB,OAAO,EAAE,CAAC,IAAIe,wEAAU,CAAC,CAAC,EAAEF,gGAAmB,CAACvC,OAAO,CAAC,EAAEsC,gFAAY,CAAC,CAAC,EAAED,gFAAY,CAAC,CAAC,CAAC;IACzFO,KAAK,EAAE,KAAK;IACZC,qBAAqB,EAAE;MAACC,KAAK,EAAE;IAAO,CAAC;IACvCjB,YAAY,EAAE;MACZkB,QAAQ,EAAElD,0DAAM,CAAC,CAAC;MAClBmD,SAAS,EAAE,CAACR,gFAAY,CAAC,CAAC;IAC5B,CAAC;IACDS,WAAW,EAAE;MACXC,UAAU,EAAE;IACd;EACF,CAAC;AACH;;;;;;;;;;;;;AC5B8B,CAAC;;AAGW;AAEnC,SAASb,YAAYA,CAAA,EAAkB;EAC5C,MAAMgB,SAAS,GAAG,UAAU;EAC5B,MAAMC,QAAQ,GAAGC,MAAM,CAACC,WAAW,CACjCD,MAAM,CAACE,OAAO,CAACC,OAAO,CAACC,GAAG,CAAC,CAAC;EAAA,CACzBC,MAAM,CAAC,CAAC,CAACzB,IAAI,CAAC,KAAKA,IAAI,CAAC0B,UAAU,CAACR,SAAS,CAAC,CAAC,CAC9CS,GAAG,CAAC,CAAC,CAAC3B,IAAI,EAAE4B,KAAK,CAAC,KAAK,CAACC,MAAM,CAAC7B,IAAI,CAAC8B,KAAK,CAACZ,SAAS,CAACa,MAAM,CAAC,CAAC,EAAEC,IAAI,CAACC,SAAS,CAACL,KAAK,CAAC,CAAC,CACzF,CAAC;EACD,OAAO,IAAIZ,6DAAoB,CAAC;IAC9B,sBAAsB,EAAEgB,IAAI,CAACC,SAAS,CAAChB,0DAAM,CAAC,CAAC,CAAC;IAChD,GAAGE;EACL,CAAC,CAAC;AACJ;;;;;;AChBA;;;;;;;;;;;;;;;;;;;;;;;ACAuC;AAC6B;AAC5B;AAEF;AACN;AAQzB,SAASzD,MAAMA,CAAA,EAAY;EAChC,OAAO6D,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,KAAK,YAAY,CAAC,CAAC;AACnD;AAEO,SAASoB,UAAUA,CAAA,EAAY;EACpC,OAAOrB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC;AAC7C;AAEO,SAASP,MAAMA,CAAA,EAAiC;EACrD,OAAOvD,MAAM,CAAC,CAAC,GAAG,YAAY,GAAG,aAAa;AAChD;AAEA,MAAMmF,gBAAgB,GAAG,IAAIC,GAAG,CAA8C,CAAC;AAExE,eAAeC,eAAeA,CAACC,CAAS,EAAgD;EAC7F,IAAIH,gBAAgB,CAACI,GAAG,CAACD,CAAC,CAAC,EAAE;IAC3B,OAAOH,gBAAgB,CAACK,GAAG,CAACF,CAAC,CAAC;EAChC;EACA,IAAI;IACF,MAAMG,KAAK,GAAG,MAAMX,sDAAI,CAACQ,CAAC,CAAC;IAC3B,IAAIG,KAAK,CAACC,WAAW,CAAC,CAAC,EAAE;MACvB,MAAMC,GAAG,GAAG,MAAMhB,yDAAO,CAACW,CAAC,CAAC;MAC5B,IAAIK,GAAG,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;QAChC,MAAMC,WAAW,GAAG,MAAMjB,0DAAQ,CAACnF,+CAAI,CAAC6F,CAAC,EAAE,cAAc,CAAC,CAAC;QAC3D,MAAMQ,IAAI,GAAGxB,IAAI,CAACyB,KAAK,CAACF,WAAW,CAACjF,QAAQ,CAAC,CAAC,CAA4B;QAC1EuE,gBAAgB,CAACa,GAAG,CAACV,CAAC,EAAEQ,IAAI,CAAC;QAC7B,OAAOA,IAAI;MACb;MACA,IAAIR,CAAC,KAAK,GAAG,EAAE;QACb,OAAOvD,SAAS;MAClB;IACF;IACA,MAAMkE,GAAG,GAAG,MAAMZ,eAAe,CAAC5D,kDAAO,CAAE,GAAE6D,CAAE,KAAI,CAAC,CAAC;IACrDH,gBAAgB,CAACa,GAAG,CAACV,CAAC,EAAEW,GAAG,CAAC;IAC5B,OAAOA,GAAG;EACZ,CAAC,CAAC,OAAOC,GAAY,EAAE;IACrBjB,gDAAG,CAAC,iBAAiB,CAAC;IACtBA,gDAAG,CAACiB,GAAG,CAAC;IACRf,gBAAgB,CAACa,GAAG,CAACV,CAAC,EAAEvD,SAAS,CAAC;IAClC,OAAOA,SAAS;EAClB;AACF;AAEO,SAASoE,OAAOA,CAAChG,OAAe,EAAU;EAC/C;EACA,MAAMiG,OAAO,GAAG3B,uDAAU,CAAC,KAAK,CAAC,CAAC4B,MAAM,CAAClG,OAAO,CAAC,CAACmG,MAAM,CAAC,KAAK,CAAC,CAAClC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC3E,MAAMmC,IAAI,GAAG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACN,OAAO,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;EACzD,OAAOG,IAAI;AACb;AAEO,eAAeI,WAAWA,CAACxG,OAAe,EAAEyG,WAAmB,EAAmB;EACvF;EACA,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMC,UAAU,CAAC3G,OAAO,CAAC;IACtC,MAAM4G,MAAM,GAAGtH,+CAAI,CAACoH,IAAI,EAAE,KAAK,CAAC;IAChC,MAAM7B,8CAAK,CAAC+B,MAAM,CAAC;IACnB,MAAMrC,uDAAK,CAACqC,MAAM,EAAE;MAACC,SAAS,EAAE;IAAI,CAAC,CAAC;IACtC,MAAMC,OAAO,GAAGxH,+CAAI,CAACsH,MAAM,EAAEH,WAAW,CAAC;IACzC,IAAI,MAAM7B,+CAAM,CAACkC,OAAO,CAAC,EAAE;MACzB,MAAMpC,oDAAE,CAACoC,OAAO,CAAC;IACnB;IACA,OAAOA,OAAO;EAChB,CAAC,CAAC,MAAM;IACN,MAAM,IAAIC,KAAK,CAAE,yCAAwC/G,OAAQ,EAAC,CAAC;EACrE;AACF;AAEA,eAAe2G,UAAUA,CAACK,QAAgB,EAAmB;EAC3D,IAAI,MAAMpC,+CAAM,CAACtF,+CAAI,CAAC0H,QAAQ,EAAE,cAAc,CAAC,CAAC,EAAE;IAChD,OAAOA,QAAQ;EACjB;EACA,MAAMC,MAAM,GAAG3H,+CAAI,CAAC0H,QAAQ,EAAE,IAAI,CAAC;EACnC,IAAIC,MAAM,KAAKD,QAAQ,EAAE;IACvB,MAAM,IAAID,KAAK,CAAC,wBAAwB,CAAC;EAC3C;EACA,OAAOJ,UAAU,CAACM,MAAM,CAAC;AAC3B;;;;;;ACzFA;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAwC;AACO;AACP;AAEW;AAE5C,MAAM;EAACI,MAAM;EAAE5C,QAAQ,EAAE6C,gBAAgB;EAAE9C,OAAO;EAAEG;AAAI,CAAC,GAAGuC,6CAAQ;AAC3E,MAAM;EAACK,SAAS;EAAEhD,KAAK;EAAEG;AAAE,CAAC,GAAGwC,6CAAQ;AAEhC,eAAezC,QAAQA,CAACzD,IAAY,EAAmB;EAC5D,MAAMwG,MAAM,GAAG,MAAMF,gBAAgB,CAACtG,IAAI,CAAC;EAC3C,OAAOwG,MAAM,CAAC/G,QAAQ,CAAC,CAAC;AAC1B;AAEA,MAAMgH,cAAc,GAAIC,MAAyB,KAC9C;EACCA,MAAM;EACNC,UAAU,EAAE,GAAG;EACfC,WAAW,EAAE,IAAI;EACjBC,aAAa,EAAE,KAAK;EACpBC,cAAc,EAAE,KAAK;EACrBC,WAAW,EAAE,OAAO;EACpBC,SAAS,EAAE;AACb,CAAC,CAAU;AAEN,eAAeC,cAAcA,CAACC,GAAW,EAAER,MAAyB,EAAmB;EAC5F,OAAON,gDAAM,CAACc,GAAG,EAAET,cAAc,CAACC,MAAM,CAAC,CAAC;AAC5C;AAEO,eAAeS,YAAYA,CAACnH,IAAY,EAAEoH,OAAe,EAAiB;EAC/E,MAAM7D,KAAK,CAAC4C,kDAAO,CAACnG,IAAI,CAAC,EAAE;IAAC6F,SAAS,EAAE;EAAI,CAAC,CAAC;EAC7C,MAAMU,SAAS,CAACvG,IAAI,EAAEoH,OAAO,CAAC;AAChC;AAEO,eAAeC,UAAUA,CAAC1C,IAAa,EAAE5F,IAA0B,EAAmB;EAC3F,MAAM;IAACuI;EAAO,CAAC,GAAGvI,IAAI,IAAI,CAAC,CAAC;EAC5B,OAAOqH,gDAAM,CACXkB,OAAO,GAAGnE,IAAI,CAACC,SAAS,CAACuB,IAAI,CAAC,GAAGxB,IAAI,CAACC,SAAS,CAACuB,IAAI,EAAE/D,SAAS,EAAE,CAAC,CAAC,EACnE6F,cAAc,CAAC,MAAM,CACvB,CAAC;AACH;AACO,eAAec,aAAaA,CAACvH,IAAY,EAAE2E,IAAa,EAAiB;EAC9E,MAAMwC,YAAY,CAACnH,IAAI,EAAE,MAAMqH,UAAU,CAAC1C,IAAI,CAAC,CAAC;AAClD;AAEO,eAAe6C,QAAQA,CAACC,EAAU,EAAmB;EAC1D,OAAOrB,gDAAM,CAACqB,EAAE,EAAEhB,cAAc,CAAC,OAAO,CAAC,CAAC;AAC5C;AACO,eAAeiB,WAAWA,CAAC1H,IAAY,EAAEyH,EAAU,EAAiB;EACzE,MAAMN,YAAY,CAACnH,IAAI,EAAE,MAAMwH,QAAQ,CAACC,EAAE,CAAC,CAAC;AAC9C;AAEO,eAAeE,QAAQA,CAACC,EAAU,EAAmB;EAC1D,OAAOxB,gDAAM,CAACwB,EAAE,EAAEnB,cAAc,CAAC,YAAY,CAAC,CAAC;AACjD;AACO,eAAeoB,WAAWA,CAAC7H,IAAY,EAAE4H,EAAU,EAAiB;EACzE,MAAMT,YAAY,CAACnH,IAAI,EAAE,MAAM2H,QAAQ,CAACC,EAAE,CAAC,CAAC;AAC9C;AAEO,eAAeE,uBAAuBA,CAAC9H,IAAY,EAAEoH,OAAe,EAAiB;EAC1F,IAAI,MAAMxD,MAAM,CAAC5D,IAAI,CAAC,EAAE;IACtB;EACF;EACA,MAAMmH,YAAY,CAACnH,IAAI,EAAEoH,OAAO,CAAC;AACnC;AAEO,eAAevD,KAAKA,CAACkE,OAAe,EAAiB;EAC1D,MAAMrE,EAAE,CAACqE,OAAO,EAAE;IAAClC,SAAS,EAAE,IAAI;IAAEmC,KAAK,EAAE;EAAI,CAAC,CAAC;AACnD;AAEO,eAAeC,QAAQA,CAACF,OAAe,EAAiB;EAC7D,IAAI;IACF,MAAMlE,KAAK,CAACkE,OAAO,CAAC;EACtB,CAAC,SAAS;IACR,MAAMxE,KAAK,CAACwE,OAAO,EAAE;MAAClC,SAAS,EAAE;IAAI,CAAC,CAAC;EACzC;AACF;AAEO,eAAeqC,EAAEA,CAACC,IAAY,EAAEC,EAAU,EAAiB;EAChE,OAAO,IAAIC,OAAO,CAAC,CAAC/H,OAAO,EAAEgI,MAAM,KAAK;IACtC9I,wDAAI,CAAE,SAAQ2I,IAAK,IAAGC,EAAG,EAAC,EAAErD,GAAG,IAAKA,GAAG,GAAGuD,MAAM,CAACvD,GAAG,CAAC,GAAGzE,OAAO,CAAC,CAAE,CAAC;EACrE,CAAC,CAAC;AACJ;AAEO,eAAesD,MAAMA,CAAC5D,IAAY,EAAoB;EAC3D,IAAI;IACF,MAAMqG,MAAM,CAACrG,IAAI,CAAC;IAClB,OAAO,IAAI;EACb,CAAC,CAAC,MAAM;IACN,OAAO,KAAK;EACd;AACF;AAEO,eAAeuI,aAAaA,CAACvI,IAAY,EAA+B;EAC7E,IAAI;IACF,MAAM0E,WAAW,GAAG,MAAMjB,QAAQ,CAACzD,IAAI,CAAC;IACxC,OAAO0E,WAAW,CAACjF,QAAQ,CAAC,CAAC;EAC/B,CAAC,CAAC,MAAM;IACN,OAAOmB,SAAS;EAClB;AACF;AAEO,SAAS4H,iBAAiBA,CAACxI,IAAY,EAAsB;EAClE,IAAI;IACF,MAAM0E,WAAW,GAAGtG,qDAAY,CAAC4B,IAAI,CAAC;IACtC,OAAO0E,WAAW,CAACjF,QAAQ,CAAC,CAAC;EAC/B,CAAC,CAAC,MAAM;IACN,OAAOmB,SAAS;EAClB;AACF;AAEO,eAAe6H,SAASA,CAACzI,IAAY,EAAqB;EAC/D,MAAM0I,KAAe,GAAG,EAAE;EAC1B,MAAMC,IAAI,GAAG,MAAMnF,OAAO,CAACxD,IAAI,EAAE;IAAC4I,aAAa,EAAE;EAAI,CAAC,CAAC;EACvD,MAAM1C,QAAyB,GAAG,EAAE;EACpC,KAAK,MAAM2C,GAAG,IAAIF,IAAI,EAAE;IACtB,MAAMG,OAAO,GAAGxK,+CAAI,CAAC0B,IAAI,EAAE6I,GAAG,CAAC1H,IAAI,CAAC;IACpC,IAAI0H,GAAG,CAACtE,WAAW,CAAC,CAAC,EAAE;MACrB2B,QAAQ,CAAC6C,IAAI,CACXN,SAAS,CAACK,OAAO,CAAC,CAACE,IAAI,CAACC,QAAQ,IAAI;QAClCP,KAAK,CAACK,IAAI,CAAC,GAAGE,QAAQ,CAAC;MACzB,CAAC,CACH,CAAC;IACH,CAAC,MAAM,IAAIJ,GAAG,CAACK,MAAM,CAAC,CAAC,EAAE;MACvBR,KAAK,CAACK,IAAI,CAACD,OAAO,CAAC;IACrB;EACF;EACA,MAAMT,OAAO,CAACc,GAAG,CAACjD,QAAQ,CAAC;EAC3B,OAAOwC,KAAK;AACd;;;;;;ACjIA;;;;;;ACAA;;;;;;;;;;;ACAO,MAAM;EAAC5E,GAAG;EAAEsF;AAAK,CAAC,GAAGC,OAAO;;;;;;;;;;;;;;;;;;;;;;;ACAa;AACjB;AAEW;AACJ;AACsB;AAGH;AACe;AAmCjE,MAAMO,kBAAkB,SAASH,iDAAY,CAAC;EACnCtI,IAAI,GAAG,oBAAoB;EACpC0I,WAAWA,CACAC,WAAmB,EACnCC,OAAe,EACfC,QAAiB,EACjBC,GAAyB,EACTC,MAAe,EAC/B;IACA,KAAK,CAACH,OAAO,CAAC;IAAC,KANCD,WAAmB,GAAnBA,WAAmB;IAAA,KAInBI,MAAe,GAAfA,MAAe;IAG/B,IAAIF,QAAQ,KAAKpJ,SAAS,EAAE;MAC1B,IAAI,CAACuJ,IAAI,GAAGH,QAAQ;IACtB;IACA,IAAIC,GAAG,EAAE;MACP,IAAI,CAACA,GAAG,GAAGA,GAAG;IAChB;EACF;AACF;AAEA,MAAMG,mBAAmB,GAAG,GAAG;AAE/B,MAAMC,YAAY,SAASV,oFAAgB,CAAC;EAChCxI,IAAI,GAAG,cAAc;EAGdmJ,UAAU,GAAG,IAAIrG,GAAG,CAAoB,CAAC;EAGlDsG,SAAS,GAAG,KAAK;EAEzB,MAAgBC,KAAKA,CAACC,QAAkB,EAAiB;IACvD,OAAO,IAAIpC,OAAO,CAAO/H,OAAO,IAAI;MAClC,IAAI,CAACoK,iBAAiB,GAAGC,WAAW,CAAC,MAAM,IAAI,CAACC,SAAS,CAAC,CAAC,EAAER,mBAAmB,CAAC;;MAEjF;MACA,MAAMS,WAAW,GAAG,IAAI,CAAC7L,OAAO;MAChC,MAAM8L,aAAa,GAAGxM,+CAAI,CAACuM,WAAW,EAAE,IAAI,CAAC;MAC7C,MAAME,aAAa,GAAGxB,oDAAW,CAACuB,aAAa,EAAE;QAAClC,aAAa,EAAE;MAAI,CAAC,CAAC,CACpEhG,MAAM,CAACoI,CAAC,IAAIA,CAAC,CAACzG,WAAW,CAAC,CAAC,IAAI+E,mDAAU,CAAChL,+CAAI,CAACwM,aAAa,EAAEE,CAAC,CAAC7J,IAAI,EAAE,cAAc,CAAC,CAAC,CAAC,CACvF2B,GAAG,CAACkI,CAAC,IAAI1M,+CAAI,CAACwM,aAAa,EAAEE,CAAC,CAAC7J,IAAI,CAAC,CAAC;MACxC,MAAM8J,QAAQ,GAAG,CAAC,aAAa,EAAE,cAAc,CAAC,CAACC,OAAO,CAACC,OAAO,IAC9DJ,aAAa,CAACjI,GAAG,CAAC0B,GAAG,IAAIlG,+CAAI,CAACkG,GAAG,EAAE2G,OAAO,CAAC,CAC7C,CAAC;MAED,IAAI,CAACC,OAAO,GAAGnM,+CAAK,CAACgM,QAAQ,CAAC;MAC9B,IAAI,CAACG,OAAO,CACTC,EAAE,CAAC,KAAK,EAAErL,IAAI,IAAI;QACjB,IAAI,CAACuK,SAAS,GAAG,IAAI;QACrB,IAAIvK,IAAI,CAAC6C,UAAU,CAAE,GAAEgI,WAAY,GAAE,CAAC,EAAE;UACtC,IAAI,CAACP,UAAU,CAACzF,GAAG,CAAC7E,IAAI,EAAE;YAACsL,MAAM,EAAE;UAAQ,CAAC,CAAC;QAC/C;MACF,CAAC,CAAC,CACDD,EAAE,CAAC,QAAQ,EAAErL,IAAI,IAAI;QACpB,IAAI,CAACuK,SAAS,GAAG,IAAI;QACrB,IAAIvK,IAAI,CAAC6C,UAAU,CAAE,GAAEgI,WAAY,GAAE,CAAC,EAAE;UACtC,IAAI,CAACP,UAAU,CAACzF,GAAG,CAAC7E,IAAI,EAAE;YAACsL,MAAM,EAAE;UAAQ,CAAC,CAAC;QAC/C;MACF,CAAC,CAAC,CACDD,EAAE,CAAC,QAAQ,EAAErL,IAAI,IAAI;QACpB,IAAI,CAACuK,SAAS,GAAG,IAAI;QACrB,IAAIvK,IAAI,CAAC6C,UAAU,CAAE,GAAEgI,WAAY,GAAE,CAAC,EAAE;UACtC,IAAI,CAACP,UAAU,CAACiB,MAAM,CAACvL,IAAI,CAAC;QAC9B;MACF,CAAC,CAAC,CACDqL,EAAE,CAAC,OAAO,EAAE,MAAM;QACjB,IAAI,CAACT,SAAS,CAAC,CAAC;QAChBtK,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;MACJmK,QAAQ,CAACe,KAAK,CAACC,WAAW,CAACC,GAAG,CAAC,IAAI,CAACvK,IAAI,EAAEwK,IAAI,IAAI;QAChD,IAAI,CAACF,WAAW,GAAGE,IAAI;QACvB,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAC9B,CAAC,CAAC;MACFnB,QAAQ,CAACe,KAAK,CAACK,YAAY,CAACC,QAAQ,CAAC,IAAI,CAAC3K,IAAI,EAAE,CAACsK,WAAW,EAAEM,EAAE,KAAK;QACnEC,UAAU,CAAC,MAAM;UACf;UACA,IAAI,CAACC,SAAS,CAAC,CAAC,CAACC,OAAO,CAACH,EAAE,CAAC;QAC9B,CAAC,EAAE3B,mBAAmB,CAAC;MACzB,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEQQ,SAASA,CAAA,EAAS;IACxB,IAAI,CAAC,IAAI,CAACL,SAAS,EAAE;MACnB;IACF;IACA,IAAI,CAACA,SAAS,GAAG,KAAK;IACtB,MAAM4B,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC7B,UAAU,CAAC7H,OAAO,CAAC,CAAC,CAAC;IAClD,IAAI0J,WAAW,CAACjJ,MAAM,KAAK,CAAC,EAAE;MAC5B;IACF;IAEA,MAAM4G,WAAW,GAAGzE,IAAI,CAAC+G,MAAM,CAAC,CAAC;IACjC,KAAK,MAAM,CAACpC,QAAQ,CAAC,IAAImC,WAAW,EAAE;MACpC,IAAI,CAAC7B,UAAU,CAACzF,GAAG,CAACmF,QAAQ,EAAE;QAACsB,MAAM,EAAE,aAAa;QAAExB;MAAW,CAAC,CAAC;IACrE;IAEA,MAAMuC,WAAW,GAAItH,GAAY,IAAW;MAC1C,KAAK,MAAM,CAACiF,QAAQ,CAAC,IAAImC,WAAW,EAAE;QACpC,MAAMG,YAAY,GAAG,IAAI,CAAChC,UAAU,CAACjG,GAAG,CAAC2F,QAAQ,CAAC;QAClD,IACE,CAACsC,YAAY,IACbA,YAAY,CAAChB,MAAM,KAAK,aAAa,IACrCgB,YAAY,CAACxC,WAAW,KAAKA,WAAW,EACxC;UACA;QACF;QACA,IAAI,CAACQ,UAAU,CAACzF,GAAG,CAACmF,QAAQ,EAAE;UAACsB,MAAM,EAAE,SAAS;UAAExB,WAAW;UAAE/E;QAAG,CAAC,CAAC;MACtE;IACF,CAAC;IAED,IAAI;MACF,MAAMwH,YAAY,GAAGjO,+CAAI,CAAC,IAAI,CAACU,OAAO,EAAE,eAAe,CAAC;MACxD,MAAMwN,MAAM,GAAG,IAAIhD,0CAAM,CAAC;QACxBiD,GAAG,EAAE,IAAI,CAACzN,OAAO;QACjB0N,cAAc,EAAE;UACdC,QAAQ,EAAE;YACR,iBAAiB,EAAE;cACjBC,UAAU,EAAE;gBACVC,OAAO,EAAEN;cACX;YACF;UACF,CAAC;UACDO,aAAa,EAAE;YACbD,OAAO,EAAEN;UACX;QACF;MACF,CAAC,CAAC;MACFC,MAAM,CACHO,SAAS,CAACZ,WAAW,CAACrJ,GAAG,CAACkI,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACrChC,IAAI,CAACgE,OAAO,IAAI;QACf,KAAK,MAAMC,MAAM,IAAID,OAAO,EAAE;UAC5B,MAAMV,YAAY,GAAG,IAAI,CAAChC,UAAU,CAACjG,GAAG,CAAC4I,MAAM,CAACjD,QAAQ,CAAC;UACzD,IACE,CAACsC,YAAY,IACbA,YAAY,CAAChB,MAAM,KAAK,aAAa,IACrCgB,YAAY,CAACxC,WAAW,KAAKA,WAAW,EACxC;YACA;UACF;UACA,IAAImD,MAAM,CAACC,QAAQ,CAAChK,MAAM,GAAG,CAAC,EAAE;YAC9B,IAAI,CAACoH,UAAU,CAACzF,GAAG,CAACoI,MAAM,CAACjD,QAAQ,EAAE;cACnCsB,MAAM,EAAE,QAAQ;cAChBxB,WAAW;cACXoD,QAAQ,EAAED,MAAM,CAACC;YACnB,CAAC,CAAC;UACJ,CAAC,MAAM;YACL,IAAI,CAAC5C,UAAU,CAACzF,GAAG,CAACoI,MAAM,CAACjD,QAAQ,EAAE;cAACsB,MAAM,EAAE,SAAS;cAAExB;YAAW,CAAC,CAAC;UACxE;QACF;MACF,CAAC,CAAC,CACDqD,KAAK,CAACd,WAAW,CAAC,CAClBH,OAAO,CAAC,MAAM;QACb,IAAI,CAACN,qBAAqB,CAAC,CAAC;QAC5B,IAAI,CAACwB,SAAS,CAAC,CAAC;MAClB,CAAC,CAAC;IACN,CAAC,CAAC,OAAOrI,GAAY,EAAE;MACrBsH,WAAW,CAACtH,GAAG,CAAC;MAChB,IAAI,CAAC6G,qBAAqB,CAAC,CAAC;MAC5B,IAAI,CAACwB,SAAS,CAAC,CAAC;IAClB;EACF;EAEQxB,qBAAqBA,CAAA,EAAS;IACpC,IAAI,CAAC,IAAI,CAACH,WAAW,EAAE;MACrB;IACF;;IAEA;IACA,IAAI4B,WAA2C;IAC/C,KAAK,MAAMC,SAAS,IAAI,IAAI,CAAChD,UAAU,CAACiD,MAAM,CAAC,CAAC,EAAE;MAChD,IAAID,SAAS,CAAChC,MAAM,KAAK,SAAS,EAAE;QAClC+B,WAAW,GAAG,IAAIzD,kBAAkB,CAClC0D,SAAS,CAACxD,WAAW,EACpB,2BACCwD,SAAS,CAACvI,GAAG,YAAYgB,KAAK,GAAGuH,SAAS,CAACvI,GAAG,CAACyI,KAAK,GAAGxK,MAAM,CAACsK,SAAS,CAACvI,GAAG,CAC5E,EACH,CAAC;MACH;IACF;IACA,IAAI,CAAC0G,WAAW,CAACgC,MAAM,GAAG,CACxB,GAAI,IAAI,CAAChC,WAAW,CAACgC,MAAM,CAA2C7K,MAAM,CAC1E8K,CAAC,IAAI,EAAE,aAAa,IAAIA,CAAC,CAC3B,CAAC,EACD,IAAIL,WAAW,GAAG,CAACA,WAAW,CAAC,GAAG,EAAE,CAAC,CACtC;;IAED;IACA,IAAI,CAAC5B,WAAW,CAACkC,QAAQ,GAAG,CAC1B,GAAI,IAAI,CAAClC,WAAW,CAACkC,QAAQ,CAA2C/K,MAAM,CAC5E8K,CAAC,IAAI,EAAE,aAAa,IAAIA,CAAC,CAC3B,CAAC,EACD,GAAG,CAAC,GAAG,IAAI,CAACpD,UAAU,CAAC7H,OAAO,CAAC,CAAC,CAAC,CAC9BmL,IAAI,CAAC,CAACC,EAAE,EAAEC,EAAE,KAAKD,EAAE,CAAC,CAAC,CAAC,CAACE,aAAa,CAACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAC5C5C,OAAO,CAAC,CAAC,CAAClB,QAAQ,EAAEsD,SAAS,CAAC,KAAK;MAClC,IAAIA,SAAS,CAAChC,MAAM,KAAK,QAAQ,EAAE;QACjC,OAAO,EAAE;MACX;MACA,OAAOgC,SAAS,CAACJ,QAAQ,CAACpK,GAAG,CAC3BkL,GAAG,IACD,IAAIpE,kBAAkB,CACpB0D,SAAS,CAACxD,WAAW,EACrBJ,yEAAS,CAACsE,GAAG,CAACjE,OAAO,CAAC,EACtBC,QAAQ,EACR;QACEiE,KAAK,EAAE;UAACC,IAAI,EAAEF,GAAG,CAACE,IAAI;UAAEC,MAAM,EAAEH,GAAG,CAACG;QAAM,CAAC;QAC3CC,GAAG,EACDJ,GAAG,CAACK,OAAO,KAAKzN,SAAS,GACrBA,SAAS,GACT;UAACsN,IAAI,EAAEF,GAAG,CAACK,OAAO;UAAEF,MAAM,EAAEH,GAAG,CAACM;QAAS;MACjD,CAAC,EACDN,GAAG,CAAC9D,MAAM,IAAItJ,SAChB,CACJ,CAAC;IACH,CAAC,CAAC,CACL;EACH;EAEQwM,SAASA,CAAA,EAAS;IACxB,IAAI,CAAC,IAAI,CAACmB,uBAAuB,EAAE;MACjC;IACF;IACA,KAAK,MAAMC,KAAK,IAAI,IAAI,CAAClE,UAAU,CAACiD,MAAM,CAAC,CAAC,EAAE;MAC5C,IAAIiB,KAAK,CAAClD,MAAM,KAAK,QAAQ,IAAIkD,KAAK,CAAClD,MAAM,KAAK,aAAa,EAAE;QAC/D;MACF;IACF;IACA,IAAI,CAACiD,uBAAuB,CAAC,CAAC;EAChC;EAEA,MAActC,SAASA,CAAA,EAAkB;IACvC,OAAO,IAAI5D,OAAO,CAAO/H,OAAO,IAAI;MAClC,IAAI,CAACiO,uBAAuB,GAAGjO,OAAO;MACtC,IAAI,CAAC8M,SAAS,CAAC,CAAC;IAClB,CAAC,CAAC;EACJ;EAEA,MAAgBqB,QAAQA,CAAA,EAAkB;IAAA,IAAAC,aAAA;IACxCC,aAAa,CAAC,IAAI,CAACjE,iBAAiB,CAAC;IACrC,QAAAgE,aAAA,GAAM,IAAI,CAACtD,OAAO,cAAAsD,aAAA,uBAAZA,aAAA,CAAcE,KAAK,CAAC,CAAC;EAC7B;AACF;AAEO,SAAStN,YAAYA,CAAA,EAAkB;EAC5C,OAAO,IAAI+I,YAAY,CAAC,CAAC;AAC3B;;;;;;AChSA;;;;;;ACAA;;;;;;;;;;ACAA,MAAMwE,SAAS,GAAG,IAAItP,MAAM,CAC1B,CACE,6FAA6F,EAC7F,0DAA0D,CAC3D,CAACjB,IAAI,CAAC,GAAG,CAAC,EACX,IACF,CAAC;AACM,MAAMoL,SAAS,GAAIoF,CAAS,IAAaA,CAAC,CAACC,OAAO,CAACF,SAAS,EAAE,EAAE,CAAC;;;;;;;;;;;;ACLjB;AACT;AAEvC,MAAelF,gBAAgB,CAAC;EAE3B3K,OAAO,GAAW0D,OAAO,CAAC+J,GAAG,CAAC,CAAC;;EAEzC;;EAEOyC,KAAKA,CAACzE,QAAkB,EAAQ;IACrC,IAAI,CAACzL,OAAO,GAAGyL,QAAQ,CAACzL,OAAO;IAC/ByL,QAAQ,CAACe,KAAK,CAAC2D,SAAS,CAACC,UAAU,CAAC,IAAI,CAACjO,IAAI,EAAE,YAAY,IAAI,CAACkO,YAAY,CAAC5E,QAAQ,CAAC,CAAC;IACvFA,QAAQ,CAACe,KAAK,CAAC8D,QAAQ,CAACF,UAAU,CAAC,IAAI,CAACjO,IAAI,EAAE,YAAY,IAAI,CAACkO,YAAY,CAAC5E,QAAQ,CAAC,CAAC;IACtFA,QAAQ,CAACe,KAAK,CAAC+D,QAAQ,CAACH,UAAU,CAAC,IAAI,CAACjO,IAAI,EAAE,YAAY,IAAI,CAACqO,gBAAgB,CAAC/E,QAAQ,CAAC,CAAC;IAC1FuE,uEAAoB,CAAC,MAAM,IAAI,CAACS,WAAW,CAAChF,QAAQ,CAAC,CAAC;EACxD;EAKA;;EAEQiF,UAAU,GAAG,KAAK;EAC1B,MAAcL,YAAYA,CAAC5E,QAAkB,EAAiB;IAC5D,IAAI,IAAI,CAACiF,UAAU,EAAE;MACnB;IACF;IACA,IAAI,CAACA,UAAU,GAAG,IAAI;IACtB,MAAM,IAAI,CAAClF,KAAK,CAACC,QAAQ,CAAC;EAC5B;;EAEA;;EAEQkF,SAAS,GAAG,KAAK;EACjBF,WAAWA,CAAChF,QAAkB,EAAQ;IAC5C,IAAI,IAAI,CAACkF,SAAS,EAAE;MAClB;IACF;IACA,IAAI,CAACA,SAAS,GAAG,IAAI;IACrBtH,OAAO,CAAC/H,OAAO,CAAC,IAAI,CAACmO,QAAQ,CAAChE,QAAQ,CAAC,CAAC,CAAC0C,KAAK,CAACpI,GAAG,IAAI;MACpDkK,8DAAW,CAAE,mCAAkC,IAAI,CAAC9N,IAAK,EAAC,EAAE4D,GAAG,CAAC;IAClE,CAAC,CAAC;EACJ;EACA,MAAcyK,gBAAgBA,CAAC/E,QAAkB,EAAiB;IAChE,IAAI,IAAI,CAACkF,SAAS,EAAE;MAClB;IACF;IACA,IAAI,CAACA,SAAS,GAAG,IAAI;IACrB,MAAM,IAAI,CAAClB,QAAQ,CAAChE,QAAQ,CAAC;EAC/B;AACF;;;;;;;;;;;ACpD8C;AAE9C,IAAImF,MAAM,GAAG,KAAK;AAClB,MAAMC,SAAyC,GAAG,EAAE;AAEpD,SAASC,YAAYA,CAAA,EAAS;EAC5B,IAAIF,MAAM,EAAE;IACV;EACF;EACAA,MAAM,GAAG,IAAI;EACb,KAAK,MAAMG,EAAE,IAAIF,SAAS,EAAE;IAC1BxH,OAAO,CAAC/H,OAAO,CAACyP,EAAE,CAAC,CAAC,CAAC,CAAC5C,KAAK,CAACpI,GAAG,IAAIkK,8DAAW,CAAC,sCAAsC,EAAElK,GAAG,CAAC,CAAC;EAC9F;AACF;AAEArC,OAAO,CAAC2I,EAAE,CAAC,YAAY,EAAE,MAAMyE,YAAY,CAAC,CAAC,CAAC;AAC9CpN,OAAO,CAAC2I,EAAE,CAAC,MAAM,EAAE,MAAMyE,YAAY,CAAC,CAAC,CAAC;AACxCpN,OAAO,CAAC2I,EAAE,CAAC,SAAS,EAAE,MAAMyE,YAAY,CAAC,CAAC,CAAC;AAC3CpN,OAAO,CAAC2I,EAAE,CAAC,QAAQ,EAAE,MAAMyE,YAAY,CAAC,CAAC,CAAC;AAC1CpN,OAAO,CAAC2I,EAAE,CAAC,mBAAmB,EAAEtG,GAAG,IAAI;EACrCkK,8DAAW,CAAC,mBAAmB,EAAElK,GAAG,CAAC;EACrC+K,YAAY,CAAC,CAAC;AAChB,CAAC,CAAC;AAEK,SAASd,oBAAoBA,CAACjD,EAA8B,EAAQ;EACzE8D,SAAS,CAAC9G,IAAI,CAACgD,EAAE,CAAC;AACpB;;;;;;;;;;;;;AC1BuC;AAEL;AAE3B,SAASkD,WAAWA,CAAC,GAAGgB,GAAc,EAAQ;EACnD,KAAK,MAAMC,IAAI,IAAID,GAAG,EAAE;IACtB,IAAI;MACF,MAAM/I,GAAG,GACP,OAAOgJ,IAAI,KAAK,QAAQ,GACpBA,IAAI,GACJA,IAAI,YAAYnK,KAAK,GACnBmK,IAAI,CAAC1C,KAAK,IAAIxK,MAAM,CAACkN,IAAI,CAAC,GAC1B/M,IAAI,CAACC,SAAS,CAAC8M,IAAI,CAAC;MAC5B9G,kDAAK,CAAClC,GAAG,CAAC;MACV8I,uDAAc,CAAC,WAAW,EAAE9I,GAAG,CAAC;IAClC,CAAC,CAAC,MAAM;MACNkC,kDAAK,CAACpG,MAAM,CAACiN,GAAG,CAAC,CAAC;MAClBD,uDAAc,CAAC,WAAW,EAAEhN,MAAM,CAACiN,GAAG,CAAC,CAAC;IAC1C;EACF;AACF;;;;;;;;;;;;;;ACpB+B;AAEyC;AAIjE,SAAS1O,mBAAmBA,CAACvC,OAAe,EAAiB;EAClE,OAAO,IAAImR,uEAA0B,CAAC;IACpCvD,UAAU,EAAE;MACVwD,iBAAiB,EAAE;QACjBC,SAAS,EAAE,IAAI;QACfC,QAAQ,EAAE,IAAI;QACdC,WAAW,EAAE,KAAK;QAClBC,MAAM,EAAE;MACV,CAAC;MACD9O,IAAI,EAAE,UAAU;MAChB+O,UAAU,EAAEnS,+CAAI,CAACU,OAAO,EAAE,eAAe;IAC3C,CAAC;IACD0R,SAAS,EAAE,OAAO;IAClBC,MAAM,EAAE;MAAC7M,GAAG,EAAEA,CAAA,KAAM,CAAC,CAAC;MAAEsF,KAAK,EAAEA,CAAA,KAAM,CAAC;IAAC;EACzC,CAAC,CAAC;AACJ;;;;;;ACrBA;;;;;;;;;;;;ACAwD;AAIjD,SAAS5H,YAAYA,CAAA,EAAkB;EAC5C,OAAO,IAAIoP,8DAAmB,CAAC;IAC7BC,aAAa,EAAE;MACbzK,MAAM,EAAE;QACN0K,QAAQ,EAAE;MACZ;IACF,CAAC;IACDC,eAAe,EAAE;EACnB,CAAC,CAAC;AACJ;;;;;;ACbA;;;;;;;;;;;;;;;;;ACAwC;AACD;AACR;AAIG;AAE3B,MAAMtP,UAAU,CAAC;EACfyN,KAAKA,CAACzE,QAAkB,EAAQ;IACrCA,QAAQ,CAACe,KAAK,CAAC2D,SAAS,CAACrD,QAAQ,CAAC,YAAY,EAAE,CAACrB,QAAQ,EAAEsB,EAAE,KAAK;MAChE,MAAMiF,OAAO,GAAG,CACd,MAAM,EACN,SAAS,EACT,SAAS,EACT,eAAe,EACf,mBAAmB,EACnB,oBAAoB,CACrB,CAAC1S,IAAI,CAAC,GAAG,CAAC;MACXkB,wDAAI,CAACwR,OAAO,EAAE;QAACvE,GAAG,EAAEhC,QAAQ,CAACzL;MAAO,CAAC,EAAE,CAAC+F,GAAG,EAAEkM,MAAM,EAAEC,MAAM,KAAK;QAC9D,IAAInM,GAAG,EAAE;UACPqE,kDAAK,CAAE,kBAAiBqB,QAAQ,CAACzL,OAAQ,EAAC,CAAC;UAC3C+M,EAAE,CAAChH,GAAG,CAAC;UACP;QACF;QACA,MAAM4I,QAAQ,GAAGuD,MAAM,CAACC,KAAK,CAAC,IAAI,CAAC,CAACvO,MAAM,CAACwO,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAACnO,MAAM,GAAG,CAAC,CAAC;QACpE,IAAIyK,QAAQ,CAACzK,MAAM,GAAG,CAAC,EAAE;UACvB8M,uDAAc,CAAC1R,+CAAI,CAACmM,QAAQ,CAACzL,OAAO,EAAG,oBAAmB,CAAC,EAAEkS,MAAM,CAAC;QACtE;QACAnF,EAAE,CAAC,CAAC;MACN,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;;;;;;;;;;;;;;;;;;;;;;;ACjCA;AACqB;AACM;AACO;AACZ;AACO;AACiB;AAGA;AAC9C;;AAEO,SAASvN,cAAcA,CAAA,EAAkB;EAC9C,OAAO;IACLyC,IAAI,EAAE,UAAU;IAChBqQ,OAAO,EAAE,mBAAmB;IAC5BC,MAAM,EAAE,cAAc;IACtBC,OAAO,EAAE;MACPC,OAAO,EAAE,CACP,CACE,mBAAmB,EACnB;QACEC,OAAO,EAAE,OAAO;QAChBC,QAAQ,EAAE,IAAI;QACdC,WAAW,EAAE,OAAO;QACpBC,MAAM,EAAE;UAACC,OAAO,EAAE;QAAM;MAC1B,CAAC,CACF,EACD,CAAC,qBAAqB,EAAE;QAACC,OAAO,EAAE;MAAW,CAAC,CAAC,EAC/C,CAAC,0BAA0B,CAAC,CAC7B;MACDrR,OAAO,EAAEqD,8DAAU,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,yBAAyB,EAAE;QAACiO,UAAU,EAAE,CAAC,cAAc;MAAC,CAAC,CAAC;IAC3F;EACF,CAAC;AACH;;;;;;AClCA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;ACAA;AACqB;AACM;AACO;AACZ;AACK;AAG3B;;AAEO,SAASvT,eAAeA,CAAA,EAAkB;EAC/C,OAAO;IACLwC,IAAI,EAAE,QAAQ;IACdgR,GAAG,EAAE,CAAC,mBAAmB,CAAC;IAC1B7Q,OAAO,EAAE;EACX,CAAC;AACH;;;;;;AChBA;;;;;;;;;;;;;;;;;;ACAmC;AACJ;AAE6B;AAElB;AACM;AAEhD,SAASiR,cAAcA,CAACrT,OAAe,EAAsB;EAC3D,MAAMsT,eAAe,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC;EACrD,KAAK,MAAMC,GAAG,IAAID,eAAe,EAAE;IACjC,MAAME,WAAW,GAAGlU,+CAAI,CAACU,OAAO,EAAG,eAAcuT,GAAI,EAAC,CAAC;IACvD,IAAIjJ,mDAAU,CAACkJ,WAAW,CAAC,EAAE;MAC3B,OAAOA,WAAW;IACpB;EACF;EACA,OAAO5R,SAAS;AAClB;AAQA,SAAS6R,cAAcA,CAACzT,OAAe,EAAe;EACpD,MAAM2F,IAAI,GAAGwN,sDAAK,CAAChP,IAAI,CAACyB,KAAK,CAAC4D,0DAAiB,CAAClK,+CAAI,CAACU,OAAO,EAAG,kBAAiB,CAAC,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;EAChG,MAAM0T,OAAO,GAAGN,yDAAQ,CAACzN,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;EAC7C,MAAMgO,MAAM,GAAGP,yDAAQ,CAACzN,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,CAAC;EAChD,MAAMiO,UAAU,GAAGR,yDAAQ,CAACzN,IAAI,CAAC,YAAY,CAAC,EAAE,SAAS,CAAC;EAC1D,OAAO;IAAC+N,OAAO;IAAEC,MAAM;IAAEC;EAAU,CAAC;AACtC;AAEO,SAASlU,qBAAqBA,CACnCM,OAAe,EACfW,SAAiB,EACkB;EACnC;EACA,MAAM;IAAC+S,OAAO;IAAEC,MAAM;IAAEC;EAAU,CAAC,GAAGH,cAAc,CAACzT,OAAO,CAAC;;EAE7D;EACA,MAAMwT,WAAW,GAAGH,cAAc,CAACrT,OAAO,CAAC;EAC3C,IAAIwT,WAAW,KAAK5R,SAAS,EAAE;IAC7B,OAAOA,SAAS;EAClB;EAEA,MAAMiS,QAAQ,GAAG;IACfC,MAAM,EAAE,KAAK;IACbC,MAAM,EAAE,EAAE;IACVC,WAAW,EAAE,KAAK;IAClBJ;EACF,CAAC;EACD,OAAO,IAAIV,gEAAqB,CAAC;IAC/Be,IAAI,EAAET,WAAW;IACjBU,YAAY,EAAEV,WAAW;IACzBW,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE,IAAI;IACZ1R,IAAI,EAAE,QAAQ;IACd2R,QAAQ,EAAE;MACRX,OAAO;MACPY,mBAAmB,EAAE,SAAS;MAC9BC,SAAS,EAAE,GAAG;MACdC,IAAI,EAAEb,MAAM,CAAC5D,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;MAC9B/O,IAAI,EAAG,GAAEL,SAAU,SAAQ;MAC3BiT,UAAU;MACVa,WAAW,EAAEb,UAAU;MACvBc,KAAK,EAAE;QACLC,SAAS,EAAEd,QAAQ;QACnBe,YAAY,EAAEf;QACd;MACF;IACF;EACF,CAAC,CAAC;AACJ;;;;;;ACzEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,SAASgB,YAAYA,CAAI5D,GAAkB,EAAY;EACrD,OAAOA,GAAG,KAAKrP,SAAS;AAC1B;AAEO,SAASkT,QAAQA,CAAC7D,GAAY,EAAiB;EACpD,OAAO,OAAOA,GAAG,KAAK,QAAQ;AAChC;AAEO,SAAS8D,QAAQA,CAAC9D,GAAY,EAAiB;EACpD,OAAO,OAAOA,GAAG,KAAK,QAAQ;AAChC;AAEO,SAAS+D,cAAcA,CAA4ChJ,CAAI,EAAgB;EAC5F,OAAOzI,MAAM,CAACgL,MAAM,CAACvC,CAAC,CAAC,CAACpI,MAAM,CAACmR,QAAQ,CAAC;AAC1C;AAEO,SAASE,cAAcA,CAAmCjJ,CAAI,EAAgB;EACnF,OAAOzI,MAAM,CAACgL,MAAM,CAACvC,CAAC,CAAC,CAACpI,MAAM,CAACkR,QAAQ,CAAC;AAC1C;AAEO,SAASI,eAAeA,CAAIC,GAAsB,EAAO;EAC9D,OAAOA,GAAG,CAACvR,MAAM,CAACiR,YAAY,CAAC;AACjC;AAEO,SAASO,0BAA0BA,CAAoCC,GAAM,EAAM;EACxF,OAAO9R,MAAM,CAACC,WAAW,CACvBD,MAAM,CAACE,OAAO,CAAC4R,GAAG,CAAC,CAACzR,MAAM,CAACoI,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,KAAKpK,SAAS,IAAIoK,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CACrE,CAAC;AACH;AAEO,SAASsJ,YAAYA,CAACvR,KAAY,EAAEwR,YAAqB,EAAS;EACvE,MAAM,IAAIxO,KAAK,CAACwO,YAAY,CAAC;AAC/B;AASO,SAASpC,KAAKA,CACnBpP,KAAc,EACdyR,YAAsC,EACD;EACrC,OAAO,OAAOzR,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,IAAI,CAAC0R,KAAK,CAACC,OAAO,CAAC3R,KAAK,CAAC,GACtEA,KAAK,GACNyR,YAAY;AAClB;AACO,SAASG,YAAYA,CAAC5R,KAAc,EAA2B;EACpE,MAAM6R,UAAU,GAAGzC,KAAK,CAACpP,KAAK,CAAC;EAC/B,IAAI6R,UAAU,KAAKhU,SAAS,EAAE;IAC5B,MAAM,IAAImF,KAAK,CAAE,oBAAmBhD,KAAM,iBAAgB,CAAC;EAC7D;EACA,OAAO6R,UAAU;AACnB;AAOO,SAASC,MAAMA,CACpB9R,KAAa,EACbyR,YAAsC,EACD;EACrC,IAAI;IACF,MAAM7P,IAAI,GAAGxB,IAAI,CAACyB,KAAK,CAAC7B,KAAK,CAAC;IAC9B,MAAM+B,GAAG,GAAGqN,KAAK,CAACxN,IAAI,CAAC;IACvB,OAAOG,GAAG,IAAI0P,YAAY;EAC5B,CAAC,CAAC,MAAM;IACN,OAAOA,YAAY;EACrB;AACF;AACO,SAASM,aAAaA,CAAC/R,KAAa,EAA2B;EACpE,MAAMgS,WAAW,GAAGF,MAAM,CAAC9R,KAAK,CAAC;EACjC,IAAIgS,WAAW,KAAKnU,SAAS,EAAE;IAC7B,MAAM,IAAImF,KAAK,CAAE,oBAAmBhD,KAAM,wCAAuC,CAAC;EACpF;EACA,OAAOgS,WAAW;AACpB;AAOO,SAASC,YAAYA,CAC1BjS,KAAc,EACdyR,YAAsC,EACD;EACrC,MAAMtN,GAAG,GAAGkL,QAAQ,CAACrP,KAAK,CAAC;EAC3B,OAAOmE,GAAG,KAAKtG,SAAS,GACpB4T,YAAY,GACZA,YAAY,KAAK5T,SAAS,GACxBiU,MAAM,CAAC3N,GAAG,CAAC,GACX2N,MAAM,CAAC3N,GAAG,EAAEsN,YAAY,CAAC;AACjC;AACO,SAASS,mBAAmBA,CAAClS,KAAc,EAA2B;EAC3E,OAAO+R,aAAa,CAACI,eAAe,CAACnS,KAAK,CAAC,CAAC;AAC9C;AAIO,SAASqP,QAAQA,CACtBrP,KAAc,EACdyR,YAAqB,EACN;EACf,OAAQ,OAAOzR,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAGyR,YAAY;AAC1D;AACO,SAASU,eAAeA,CAA4BnS,KAAc,EAAK;EAC5E,MAAMoS,aAAa,GAAG/C,QAAQ,CAAIrP,KAAK,CAAC;EACxC,IAAIoS,aAAa,KAAKvU,SAAS,EAAE;IAC/B,MAAM,IAAImF,KAAK,CAAE,oBAAmBhD,KAAM,oBAAmB,CAAC;EAChE;EACA,OAAOoS,aAAa;AACtB;AAWO,SAASC,YAAYA,CAC1BrS,KAAc,EACdsS,GAAM,EACNb,YAAyB,EACD;EACxB,OACE,OAAOzR,KAAK,KAAK,QAAQ,IAAIR,MAAM,CAACgL,MAAM,CAAC8H,GAAG,CAAC,CAAC5Q,QAAQ,CAAC1B,KAAmB,CAAC,GACzEA,KAAK,GACLyR,YAAY;AAEpB;AACO,SAASc,mBAAmBA,CACjCvS,KAAc,EACdsS,GAAM,EACM;EACZ,MAAMF,aAAa,GAAGC,YAAY,CAAIrS,KAAK,EAAEsS,GAAG,CAAC;EACjD,IAAIF,aAAa,KAAKvU,SAAS,EAAE;IAC/B,MAAM,IAAImF,KAAK,CACZ,oBAAmBhD,KAAM,oCAAmCI,IAAI,CAACC,SAAS,CACzEb,MAAM,CAACgL,MAAM,CAAC8H,GAAG,CACnB,CAAE,EACJ,CAAC;EACH;EACA,OAAOF,aAAa;AACtB;AAIO,SAASI,OAAOA,CAAcxS,KAAc,EAAEyR,YAAwB,EAAmB;EAC9F,OAAQC,KAAK,CAACC,OAAO,CAAC3R,KAAK,CAAC,GAAGA,KAAK,GAAGyR,YAAY;AACrD;AACO,SAASgB,cAAcA,CAAczS,KAAc,EAAO;EAC/D,IAAI,CAAC0R,KAAK,CAACC,OAAO,CAAC3R,KAAK,CAAC,EAAE;IACzB,MAAM,IAAIgD,KAAK,CAAE,oBAAmBhD,KAAM,oBAAmB,CAAC;EAChE;EACA,OAAOA,KAAK;AACd;AAOO,SAAS0S,aAAaA,CAC3B1S,KAAc,EACdyR,YAAuB,EACN;EACjB,MAAML,GAAG,GAAGoB,OAAO,CAACxS,KAAK,CAAC;EAC1B,IAAIoR,GAAG,KAAKvT,SAAS,EAAE;IACrB,OAAO4T,YAAY;EACrB;EACA,OAAON,eAAe,CAACC,GAAG,CAACrR,GAAG,CAACgM,CAAC,IAAIsD,QAAQ,CAAItD,CAAC,CAAC,CAAC,CAAC;AACtD;AAEO,SAAS4G,oBAAoBA,CAA4B3S,KAAc,EAAO;EACnF,MAAMoR,GAAG,GAAGqB,cAAc,CAACzS,KAAK,CAAC;EACjC,OAAOoR,GAAG,CAACrR,GAAG,CAACgM,CAAC,IAAIoG,eAAe,CAAIpG,CAAC,CAAC,CAAC;AAC5C;AAOO,SAAS6G,UAAUA,CACxB5S,KAAc,EACdyR,YAAwC,EACD;EACvC,MAAML,GAAG,GAAGoB,OAAO,CAACxS,KAAK,CAAC;EAC1B,IAAIoR,GAAG,KAAKvT,SAAS,EAAE;IACrB,OAAO4T,YAAY;EACrB;EACA,OAAON,eAAe,CAACC,GAAG,CAACrR,GAAG,CAACgM,CAAC,IAAIqD,KAAK,CAACrD,CAAC,CAAC,CAAC,CAAC;AAChD;AACO,SAAS8G,iBAAiBA,CAAC7S,KAAc,EAA6B;EAC3E,MAAMoR,GAAG,GAAGqB,cAAc,CAACzS,KAAK,CAAC;EACjC,OAAOoR,GAAG,CAACrR,GAAG,CAACgM,CAAC,IAAI6F,YAAY,CAAC7F,CAAC,CAAC,CAAC;AACtC;AAIO,SAAS+G,QAAQA,CACtB9S,KAAc,EACdyR,YAAqB,EACN;EACf,IAAI,OAAOzR,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAQ,CAAC+S,KAAK,CAAC/S,KAAK,CAAC,GAAGA,KAAK,GAAGyR,YAAY;EAC9C;EACA,IAAI,OAAOzR,KAAK,KAAK,QAAQ,EAAE;IAC7B,IAAI;MACF,MAAMgT,WAAW,GAAGC,UAAU,CAACjT,KAAK,CAAC;MACrC,OAAQ,CAAC+S,KAAK,CAACC,WAAW,CAAC,GAAGA,WAAW,GAAGvB,YAAY;IAC1D,CAAC,CAAC,MAAM;MACN,OAAOA,YAAY;IACrB;EACF;EACA,OAAOA,YAAY;AACrB;AACO,SAASyB,eAAeA,CAA4BlT,KAAc,EAAK;EAC5E,MAAMmT,aAAa,GAAGL,QAAQ,CAAC9S,KAAK,CAAC;EACrC,IAAImT,aAAa,KAAKtV,SAAS,EAAE;IAC/B,MAAM,IAAImF,KAAK,CAAE,oBAAmBhD,KAAM,oBAAmB,CAAC;EAChE;EACA,OAAOmT,aAAa;AACtB;AAIO,SAASC,SAASA,CAACpT,KAAc,EAAEyR,YAAsB,EAAuB;EACrF,IAAI,OAAOzR,KAAK,KAAK,SAAS,EAAE;IAC9B,OAAOA,KAAK;EACd;EACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAO,CAAC+S,KAAK,CAAC/S,KAAK,CAAC,GAAGA,KAAK,KAAK,CAAC,GAAG,KAAK;EAC5C;EACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,IAAIA,KAAK,KAAK,GAAG,IAAIA,KAAK,KAAK,OAAO,EAAE;MACtC,OAAO,KAAK;IACd,CAAC,MAAM,IAAIA,KAAK,KAAK,GAAG,IAAIA,KAAK,KAAK,MAAM,EAAE;MAC5C,OAAO,IAAI;IACb;IACA,OAAOyR,YAAY;EACrB;EACA,OAAOA,YAAY;AACrB;AAEO,SAAS4B,gBAAgBA,CAACrT,KAAc,EAAW;EACxD,MAAMsT,cAAc,GAAGF,SAAS,CAACpT,KAAK,CAAC;EACvC,IAAIsT,cAAc,KAAKzV,SAAS,EAAE;IAChC,MAAM,IAAImF,KAAK,CAAE,oBAAmBhD,KAAM,qBAAoB,CAAC;EACjE;EACA,OAAOsT,cAAc;AACvB;AAEA,MAAMC,eAAe,GAAG,gBAAgB;AAGjC,SAASC,MAAMA,CAACxT,KAAc,EAAEyR,YAAmB,EAAoB;EAC5E,MAAMgC,IAAI,GACRzT,KAAK,YAAY0T,IAAI,GACjB1T,KAAK,GACL,IAAI0T,IAAI,CACN,OAAO1T,KAAK,KAAK,QAAQ,IAAIuT,eAAe,CAACrV,IAAI,CAAC8B,KAAK,CAAC,GACpDiT,UAAU,CAACjT,KAAK,CAAC,GACjBC,MAAM,CAACD,KAAK,CAClB,CAAC;EACP,OAAO+S,KAAK,CAACU,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,GAAGlC,YAAY,GAAGgC,IAAI;AACpD;AAEO,SAASG,aAAaA,CAAC5T,KAAc,EAAQ;EAClD,MAAM6T,WAAW,GAAGL,MAAM,CAACxT,KAAK,CAAC;EACjC,IAAI6T,WAAW,KAAKhW,SAAS,EAAE;IAC7B,MAAM,IAAImF,KAAK,CAAE,oBAAmBhD,KAAM,+BAA8B,CAAC;EAC3E;EACA,OAAO6T,WAAW;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAASC,MAAMA,CAAI5G,GAAa,EAAe;EACpD,OAAOA,GAAG,KAAK,IAAI;AACrB;AAEO,SAAS6G,OAAOA,CAAC/R,GAAY,EAAS;EAC3C,OAAOA,GAAG,YAAYgB,KAAK,GAAGhB,GAAG,GAAG,IAAIgB,KAAK,CAAC,OAAOhB,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAG/B,MAAM,CAAC+B,GAAG,CAAC,CAAC;AAC5F;AAEO,SAASgS,aAAaA,CAAChS,GAAY,EAAU;EAClD,MAAMiS,QAAQ,GAAG7E,KAAK,CAACpN,GAAG,CAAC;EAC3B,IAAIiS,QAAQ,KAAKpW,SAAS,EAAE;IAC1B,OAAOwR,QAAQ,CAACrN,GAAG,CAAC,IAAI/B,MAAM,CAAC+B,GAAG,CAAC;EACrC;EAEA,MAAMwP,YAAY,GAAGnC,QAAQ,CAAC4E,QAAQ,CAAC,SAAS,CAAC,CAAC;EAClD,IAAIzC,YAAY,KAAK3T,SAAS,EAAE;IAC9B,OAAOoC,MAAM,CAAC+B,GAAG,CAAC;EACpB;EACA,OAAOwP,YAAY;AACrB;AAEO,SAAS0C,qBAAqBA,CAAClS,GAAY,EAAU;EAC1D,MAAMiS,QAAQ,GAAG7E,KAAK,CAACpN,GAAG,CAAC;EAC3B,IAAIiS,QAAQ,KAAKpW,SAAS,EAAE;IAC1B,OAAOwR,QAAQ,CAACrN,GAAG,CAAC,IAAI/B,MAAM,CAAC+B,GAAG,CAAC;EACrC;EAEA,MAAMyI,KAAK,GAAG4E,QAAQ,CAAC4E,QAAQ,CAAC,OAAO,CAAC,CAAC;EACzC,IAAIxJ,KAAK,KAAK5M,SAAS,EAAE;IACvB,OAAOoC,MAAM,CAAC+B,GAAG,CAAC;EACpB;EACA,OAAOyI,KAAK;AACd;AAEO,SAAS0J,iBAAiBA,CAAInU,KAAc,EAAEoU,QAAW,EAAK;EACnE,IAAIpU,KAAK,KAAKoU,QAAQ,EAAE;IACtB,MAAM,IAAIpR,KAAK,CAAE,oBAAmBhD,KAAM,kBAAiBoU,QAAS,IAAG,CAAC;EAC1E;EACA,OAAOpU,KAAK;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASqU,SAASA,CACvBzS,IAAY,EACqD;EACjE,IAAI;IACF,OAAO;MAACG,GAAG,EAAE3B,IAAI,CAACyB,KAAK,CAACD,IAAI,CAAC;MAAEI,GAAG,EAAEnE;IAAS,CAAC;EAChD,CAAC,CAAC,OAAOmE,GAAY,EAAE;IACrB,OAAO;MAACA,GAAG;MAAED,GAAG,EAAElE;IAAS,CAAC;EAC9B;AACF;;AAKA;;AA4BA;;AAUA;;AAIO,SAASyW,eAAeA,CAAIpH,GAAQ,EAA2B;EACpE,OAAOA,GAAG,CAAC/M,MAAM,GAAG,CAAC;AACvB;AACO,SAASoU,aAAaA,CAAIrH,GAAQ,EAAgC;EACvE,OAAOA,GAAG,CAAC/M,MAAM,KAAK,CAAC,GAAGtC,SAAS,GAAIqP,GAAwB;AACjE;AAKO,SAASsH,SAASA,CACvBC,IAAO,EACPC,MAAc,EACQ;EACtB,OAAOlV,MAAM,CAACC,WAAW,CACvBD,MAAM,CAACE,OAAO,CAAC+U,IAAI,CAAC,CAAC1U,GAAG,CAAC,CAAC,CAAC4U,GAAG,EAAE3U,KAAK,CAAC,KAAK,CAAE,GAAE0U,MAAO,GAAEC,GAAI,EAAC,EAAE3U,KAAK,CAAC,CACvE,CAAC;AACH;;;;;;;;;;;;;;;AC9Z+B;AAEqB;AAGV;AAEnC,SAASpE,UAAUA,CAACK,OAAe,EAAEW,SAAiB,EAAiB;EAC5E,OAAO,IAAIgY,4DAAiB,CAAC;IAC3BC,QAAQ,EAAEtZ,+CAAI,CAACU,OAAO,EAAE,gBAAgB,CAAC;IACzCmB,UAAU,EAAER,SAAS;IACrBkY,MAAM,EAAEhZ,0DAAM,CAAC;EACjB,CAAC,CAAC;AACJ;;;;;;ACbA;;;;;;;;;;;;;;;;ACAuC;AACR;AAIG;AACsB;AAUjD,SAASD,gBAAgBA,CAACI,OAAe,EAAiB;EAC/D,MAAMoG,IAAI,GAAGJ,2DAAO,CAAChG,OAAO,CAAC;EAE7B,IAAI8G,OAA2B;EAC/B,IAAIgS,SAAkC,GAAG,EAAE;EAC3CtS,+DAAW,CAACxG,OAAO,EAAE,wBAAwB,CAAC,CAC3CgK,IAAI,CAACmB,IAAI,IAAI;IACZrE,OAAO,GAAGqE,IAAI;IACd,KAAK,MAAM4N,QAAQ,IAAID,SAAS,EAAE;MAChChU,GAAG,CAACiU,QAAQ,CAAC;IACf;IACAD,SAAS,GAAG,EAAE;EAChB,CAAC,CAAC,CACD3K,KAAK,CAAC/D,8CAAK,CAAC;EACf,SAAStF,GAAGA,CAACkU,KAA4B,EAAQ;IAC/C,IAAIlS,OAAO,KAAKlF,SAAS,EAAE;MACzBkX,SAAS,CAAC/O,IAAI,CAACiP,KAAK,CAAC;IACvB,CAAC,MAAM;MACLhI,uDAAc,CAAClK,OAAO,EAAG,GAAE3C,IAAI,CAACC,SAAS,CAAC;QAAC6U,CAAC,EAAE,IAAIxB,IAAI,CAAC,CAAC,CAACyB,WAAW,CAAC,CAAC;QAAE,GAAGF;MAAK,CAAC,CAAE,IAAG,CAAC;IACzF;EACF;EAEA,OAAO;IACLG,MAAM,EAAE7Z,+CAAI,CAACU,OAAO,EAAE,MAAM,CAAC;IAC7BoZ,QAAQ,EAAE,IAAI;IACdC,GAAG,EAAE,IAAI;IACTjT,IAAI;IACJkT,OAAO,EAAE;MACP,6BAA6B,EAAE,GAAG;MAClC,8BAA8B,EAAE,wCAAwC;MACxE,8BAA8B,EAAE;IAClC,CAAC;IACDC,MAAM,EAAE;MACNC,OAAO,EAAE,MAAM;MACfC,OAAO,EAAE;IACX,CAAC;IACDC,aAAa,EAAE;MACbC,WAAW,EAAE;IACf,CAAC;IACDC,WAAW,EAAEA,CAAA,KAAM9U,GAAG,CAAC;MAACkU,KAAK,EAAE,OAAO;MAAE5S;IAAI,CAAC;EAC/C,CAAC;AACH;;;;;SCzDA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA;UACA;UACA,iCAAiC,WAAW;UAC5C;UACA;;;;;UCPA;UACA;UACA;UACA;UACA,yCAAyC,wCAAwC;UACjF;UACA;UACA;;;;;UCPA;;;;;UCAA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D;;;;;;;;;;;;ACJiE;AAE1D,SAASyT,MAAMA,CAAC9Z,IAAqC,EAAiB;EAC3E,OAAOD,iFAAS,CAACC,IAAI,CAAC;AACxB,C","sources":["webpack://b/./src/webpack/common-configs/web_config.ts","webpack://b/external node-commonjs \"node:fs\"","webpack://b/external node-commonjs \"node:path\"","webpack://b/./src/webpack/common-configs/base_config.ts","webpack://b/./src/webpack/plugins/define_plugin.ts","webpack://b/external node-commonjs \"webpack\"","webpack://b/./src/webpack/utils.ts","webpack://b/external node-commonjs \"node:crypto\"","webpack://b/external node-commonjs \"node:fs/promises\"","webpack://b/./src/fs.ts","webpack://b/external node-commonjs \"node:child_process\"","webpack://b/external node-commonjs \"prettier\"","webpack://b/./src/logger.ts","webpack://b/./src/webpack/plugins/eslint_plugin.ts","webpack://b/external node-commonjs \"chokidar\"","webpack://b/external node-commonjs \"eslint\"","webpack://b/./src/webpack/plugins/formatter.ts","webpack://b/./src/webpack/plugins/standalone_plugin.ts","webpack://b/./src/exit_handler.ts","webpack://b/./src/global_error.ts","webpack://b/./src/webpack/plugins/fork_ts_checker_plugin.ts","webpack://b/external node-commonjs \"fork-ts-checker-webpack-plugin\"","webpack://b/./src/webpack/plugins/terser_plugin.ts","webpack://b/external node-commonjs \"terser-webpack-plugin\"","webpack://b/./src/webpack/plugins/yarn_plugin.ts","webpack://b/./src/webpack/loaders/babel_loader_web.ts","webpack://b/external node-commonjs \"@babel/core\"","webpack://b/external node-commonjs \"@babel/preset-env\"","webpack://b/external node-commonjs \"@babel/preset-typescript\"","webpack://b/external node-commonjs \"babel-loader\"","webpack://b/external node-commonjs \"@babel/preset-react\"","webpack://b/external node-commonjs \"babel-plugin-react-remove-properties\"","webpack://b/./src/webpack/loaders/source_map_loader.ts","webpack://b/external node-commonjs \"source-map-loader\"","webpack://b/./src/webpack/plugins/favicons_webpack_plugin.ts","webpack://b/external node-commonjs \"favicons-webpack-plugin\"","webpack://b/./src/type_utils.ts","webpack://b/./src/webpack/plugins/html_plugin.ts","webpack://b/external node-commonjs \"html-webpack-plugin\"","webpack://b/./src/webpack/plugins/webpack_dev_server.ts","webpack://b/webpack/bootstrap","webpack://b/webpack/runtime/compat get default export","webpack://b/webpack/runtime/define property getters","webpack://b/webpack/runtime/hasOwnProperty shorthand","webpack://b/webpack/runtime/make namespace object","webpack://b/./src/webpack/configs/web.ts"],"sourcesContent":["import {readFileSync} from 'node:fs';\nimport {basename, join} from 'node:path';\n\nimport {Configuration} from 'webpack';\n\nimport {baseConfig} from '@src/webpack/common-configs/base_config';\nimport {babelLoaderWeb} from '@src/webpack/loaders/babel_loader_web';\nimport {sourceMapLoader} from '@src/webpack/loaders/source_map_loader';\nimport {faviconsWebpackPlugin} from '@src/webpack/plugins/favicons_webpack_plugin';\nimport {htmlPlugin} from '@src/webpack/plugins/html_plugin';\nimport {webpackDevServer} from '@src/webpack/plugins/webpack_dev_server';\nimport {isProd} from '@src/webpack/utils';\n\nexport function webConfig(opts: {context: string; watch: boolean}): Configuration {\n  const {context, watch} = opts;\n  const base = baseConfig({context, watch});\n\n  // Hack to retrieve the public url from the env variables\n  const envVariableFilePath = join(context, '../shared/src/env.ts');\n  const domainNameEnvVariable = `${basename(context).toUpperCase()}_CLOUDFRONT_DOMAIN_NAME`;\n  const match = new RegExp(\n    `export const ${domainNameEnvVariable} =\\\\s*'(?<domainName>[^']*)'`,\n    'u'\n  ).exec(readFileSync(envVariableFilePath).toString());\n  const domainName = match?.[1] ?? 'domain-not-found';\n  const publicUrl = `http${isProd() ? 's' : ''}://${domainName}`;\n\n  return {\n    ...base,\n    target: 'web',\n    entry: {main: join(context, 'src/index.tsx')},\n    output: {\n      path: join(context, 'dist'),\n      filename: `[name].[contenthash].js`,\n      clean: true,\n      publicPath: '/',\n    },\n    module: {\n      rules: [babelLoaderWeb(), sourceMapLoader()],\n    },\n    resolve: {\n      extensions: ['.js', '.jsx', '.ts', '.tsx'],\n      modules: ['node_modules', '../shared-web/node_modules', '../shared/node_modules'],\n      alias: {\n        '@src': join(context, 'src'),\n        '@shared': join(context, '../shared/src'),\n        '@shared-web': join(context, '../shared-web/src'),\n      },\n    },\n    plugins: [\n      ...(base.plugins ?? []),\n      htmlPlugin(context, publicUrl),\n      faviconsWebpackPlugin(context, publicUrl),\n    ],\n    devServer: watch ? webpackDevServer(context) : undefined,\n    optimization: {\n      ...base.optimization,\n      splitChunks: {\n        cacheGroups: {\n          vendor: {\n            test: /[/\\\\]node_modules[/\\\\]/u,\n            chunks: 'initial',\n            name: 'vendor',\n            enforce: true,\n          },\n        },\n      },\n    },\n  };\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"node:fs\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"node:path\");","import {Configuration} from 'webpack';\n\nimport {definePlugin} from '@src/webpack/plugins/define_plugin';\nimport {eslintPlugin} from '@src/webpack/plugins/eslint_plugin';\nimport {forkTsCheckerPlugin} from '@src/webpack/plugins/fork_ts_checker_plugin';\nimport {terserPlugin} from '@src/webpack/plugins/terser_plugin';\nimport {YarnPlugin} from '@src/webpack/plugins/yarn_plugin';\nimport {isProd} from '@src/webpack/utils';\n\nexport function baseConfig(opts: {context: string; watch: boolean}): Configuration {\n  const {context} = opts;\n\n  return {\n    mode: 'none',\n    context,\n    entry: {},\n    devtool: 'source-map',\n    plugins: [new YarnPlugin(), forkTsCheckerPlugin(context), eslintPlugin(), definePlugin()],\n    stats: false,\n    infrastructureLogging: {level: 'error'},\n    optimization: {\n      minimize: isProd(),\n      minimizer: [terserPlugin()],\n    },\n    experiments: {\n      backCompat: true,\n    },\n  };\n}\n","import webpack from 'webpack'; // eslint-disable-line import/no-named-as-default\n\nimport {WebpackPlugin} from '@src/webpack/models';\nimport {getEnv} from '@src/webpack/utils';\n\nexport function definePlugin(): WebpackPlugin {\n  const envPrefix = 'MATTHIS_';\n  const extraEnv = Object.fromEntries(\n    Object.entries(process.env) // eslint-disable-line node/no-process-env\n      .filter(([name]) => name.startsWith(envPrefix))\n      .map(([name, value]) => [String(name.slice(envPrefix.length)), JSON.stringify(value)])\n  );\n  return new webpack.DefinePlugin({\n    'process.env.NODE_ENV': JSON.stringify(getEnv()),\n    ...extraEnv,\n  });\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"webpack\");","import {createHash} from 'node:crypto';\nimport {mkdir, readdir, readFile, rm, stat} from 'node:fs/promises';\nimport {join, resolve} from 'node:path';\n\nimport {exists, rmDir} from '@src/fs';\nimport {log} from '@src/logger';\n\nexport interface WebpackConfigFragment {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  config: () => any;\n  dependencies: Record<string, string>;\n}\n\nexport function isProd(): boolean {\n  return process.env['NODE_ENV'] === 'production'; // eslint-disable-line node/no-process-env\n}\n\nexport function isSelenium(): boolean {\n  return process.env['IS_SELENIUM'] === '1'; // eslint-disable-line node/no-process-env\n}\n\nexport function getEnv(): 'production' | 'development' {\n  return isProd() ? 'production' : 'development';\n}\n\nconst packageJsonCache = new Map<string, Record<string, unknown> | undefined>();\n\nexport async function findPackageJson(p: string): Promise<Record<string, unknown> | undefined> {\n  if (packageJsonCache.has(p)) {\n    return packageJsonCache.get(p);\n  }\n  try {\n    const pStat = await stat(p);\n    if (pStat.isDirectory()) {\n      const dir = await readdir(p);\n      if (dir.includes('package.json')) {\n        const fileContent = await readFile(join(p, 'package.json'));\n        const json = JSON.parse(fileContent.toString()) as Record<string, unknown>;\n        packageJsonCache.set(p, json);\n        return json;\n      }\n      if (p === '/') {\n        return undefined;\n      }\n    }\n    const res = await findPackageJson(resolve(`${p}/..`));\n    packageJsonCache.set(p, res);\n    return res;\n  } catch (err: unknown) {\n    log('findPackageJson');\n    log(err);\n    packageJsonCache.set(p, undefined);\n    return undefined;\n  }\n}\n\nexport function getPort(context: string): number {\n  // eslint-disable-next-line @typescript-eslint/no-magic-numbers\n  const hexHash = createHash('md5').update(context).digest('hex').slice(0, 4);\n  const port = 1024 + Math.floor(parseInt(hexHash, 16) / 2);\n  return port;\n}\n\nexport async function initLogFile(context: string, logFileName: string): Promise<string> {\n  // Find the root of the project and create the log dir there\n  try {\n    const root = await lookupRoot(context);\n    const logDir = join(root, 'log');\n    await rmDir(logDir);\n    await mkdir(logDir, {recursive: true});\n    const logFile = join(logDir, logFileName);\n    if (await exists(logFile)) {\n      await rm(logFile);\n    }\n    return logFile;\n  } catch {\n    throw new Error(`Failure to identify project root from ${context}`);\n  }\n}\n\nasync function lookupRoot(fromPath: string): Promise<string> {\n  if (await exists(join(fromPath, 'package.json'))) {\n    return fromPath;\n  }\n  const parent = join(fromPath, '..');\n  if (parent === fromPath) {\n    throw new Error('Failure to lookup root');\n  }\n  return lookupRoot(parent);\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"node:crypto\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"node:fs/promises\");","import {exec} from 'node:child_process';\nimport {promises, readFileSync} from 'node:fs';\nimport {dirname, join} from 'node:path';\n\nimport {BuiltInParserName, format} from 'prettier';\n\nexport const {access, readFile: readFileInternal, readdir, stat} = promises;\nconst {writeFile, mkdir, rm} = promises;\n\nexport async function readFile(path: string): Promise<string> {\n  const buffer = await readFileInternal(path);\n  return buffer.toString();\n}\n\nconst prettierConfig = (parser: BuiltInParserName) =>\n  ({\n    parser,\n    printWidth: 100,\n    singleQuote: true,\n    trailingComma: 'es5',\n    bracketSpacing: false,\n    arrowParens: 'avoid',\n    endOfLine: 'auto',\n  }) as const;\n\nexport async function prettierFormat(str: string, parser: BuiltInParserName): Promise<string> {\n  return format(str, prettierConfig(parser));\n}\n\nexport async function writeRawFile(path: string, content: string): Promise<void> {\n  await mkdir(dirname(path), {recursive: true});\n  await writeFile(path, content);\n}\n\nexport async function prettyJson(json: unknown, opts?: {compact?: boolean}): Promise<string> {\n  const {compact} = opts ?? {};\n  return format(\n    compact ? JSON.stringify(json) : JSON.stringify(json, undefined, 2),\n    prettierConfig('json')\n  );\n}\nexport async function writeJsonFile(path: string, json: unknown): Promise<void> {\n  await writeRawFile(path, await prettyJson(json));\n}\n\nexport async function prettyJs(js: string): Promise<string> {\n  return format(js, prettierConfig('babel'));\n}\nexport async function writeJsFile(path: string, js: string): Promise<void> {\n  await writeRawFile(path, await prettyJs(js));\n}\n\nexport async function prettyTs(ts: string): Promise<string> {\n  return format(ts, prettierConfig('typescript'));\n}\nexport async function writeTsFile(path: string, ts: string): Promise<void> {\n  await writeRawFile(path, await prettyTs(ts));\n}\n\nexport async function writeRawFileIfNotExists(path: string, content: string): Promise<void> {\n  if (await exists(path)) {\n    return;\n  }\n  await writeRawFile(path, content);\n}\n\nexport async function rmDir(dirPath: string): Promise<void> {\n  await rm(dirPath, {recursive: true, force: true});\n}\n\nexport async function cleanDir(dirPath: string): Promise<void> {\n  try {\n    await rmDir(dirPath);\n  } finally {\n    await mkdir(dirPath, {recursive: true});\n  }\n}\n\nexport async function cp(from: string, to: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    exec(`cp -R ${from} ${to}`, err => (err ? reject(err) : resolve()));\n  });\n}\n\nexport async function exists(path: string): Promise<boolean> {\n  try {\n    await access(path);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function maybeReadFile(path: string): Promise<string | undefined> {\n  try {\n    const fileContent = await readFile(path);\n    return fileContent.toString();\n  } catch {\n    return undefined;\n  }\n}\n\nexport function maybeReadFileSync(path: string): string | undefined {\n  try {\n    const fileContent = readFileSync(path);\n    return fileContent.toString();\n  } catch {\n    return undefined;\n  }\n}\n\nexport async function listFiles(path: string): Promise<string[]> {\n  const files: string[] = [];\n  const ents = await readdir(path, {withFileTypes: true});\n  const promises: Promise<void>[] = [];\n  for (const ent of ents) {\n    const entPath = join(path, ent.name);\n    if (ent.isDirectory()) {\n      promises.push(\n        listFiles(entPath).then(subFiles => {\n          files.push(...subFiles);\n        })\n      );\n    } else if (ent.isFile()) {\n      files.push(entPath);\n    }\n  }\n  await Promise.all(promises);\n  return files;\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"node:child_process\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"prettier\");","export const {log, error} = console;\n","import {existsSync, readdirSync} from 'node:fs';\nimport {join} from 'node:path';\n\nimport {FSWatcher, watch} from 'chokidar';\nimport {ESLint, Linter} from 'eslint';\nimport {Compilation, Compiler, WebpackError} from 'webpack';\n\nimport {WebpackPlugin} from '@src/webpack/models';\nimport {stripAnsi} from '@src/webpack/plugins/formatter';\nimport {StandalonePlugin} from '@src/webpack/plugins/standalone_plugin';\n\ninterface QueuedFileState {\n  status: 'queued';\n}\n\ninterface InProgressFileState {\n  status: 'in-progress';\n  eslintRunId: number;\n}\n\ninterface SuccessFileState {\n  status: 'success';\n  eslintRunId: number;\n}\n\ninterface FailureFileState {\n  status: 'failed';\n  eslintRunId: number;\n  messages: Linter.LintMessage[];\n}\n\ninterface ErroredFileState {\n  status: 'errored';\n  eslintRunId: number;\n  err: unknown;\n}\n\ntype FileState =\n  | QueuedFileState\n  | InProgressFileState\n  | SuccessFileState\n  | FailureFileState\n  | ErroredFileState;\n\nexport class EslintWebpackError extends WebpackError {\n  public override name = 'EslintWebpackError';\n  public constructor(\n    public readonly eslintRunId: number,\n    message: string,\n    filePath?: string,\n    loc?: WebpackError['loc'],\n    public readonly ruleId?: string\n  ) {\n    super(message);\n    if (filePath !== undefined) {\n      this.file = filePath;\n    }\n    if (loc) {\n      this.loc = loc;\n    }\n  }\n}\n\nconst RUN_ESLINT_INTERVAL = 500;\n\nclass EslintPlugin extends StandalonePlugin {\n  protected name = 'EslintPlugin';\n  private watcher: FSWatcher | undefined;\n  private runEslintInterval: NodeJS.Timeout | undefined;\n  private readonly fileStates = new Map<string, FileState>();\n  private compilation: Compilation | undefined;\n  private resolveAwaitIdlePromise: (() => void) | undefined;\n  private shouldRun = false;\n\n  protected async setup(compiler: Compiler): Promise<void> {\n    return new Promise<void>(resolve => {\n      this.runEslintInterval = setInterval(() => this.runEslint(), RUN_ESLINT_INTERVAL);\n\n      // Generate the patterns of all the files across the workspace\n      const projectPath = this.context;\n      const workspacePath = join(projectPath, '..');\n      const workspaceDirs = readdirSync(workspacePath, {withFileTypes: true})\n        .filter(e => e.isDirectory() && existsSync(join(workspacePath, e.name, 'package.json')))\n        .map(e => join(workspacePath, e.name));\n      const patterns = ['src/**/*.ts', 'src/**/*.tsx'].flatMap(pattern =>\n        workspaceDirs.map(dir => join(dir, pattern))\n      );\n\n      this.watcher = watch(patterns);\n      this.watcher\n        .on('add', path => {\n          this.shouldRun = true;\n          if (path.startsWith(`${projectPath}/`)) {\n            this.fileStates.set(path, {status: 'queued'});\n          }\n        })\n        .on('change', path => {\n          this.shouldRun = true;\n          if (path.startsWith(`${projectPath}/`)) {\n            this.fileStates.set(path, {status: 'queued'});\n          }\n        })\n        .on('unlink', path => {\n          this.shouldRun = true;\n          if (path.startsWith(`${projectPath}/`)) {\n            this.fileStates.delete(path);\n          }\n        })\n        .on('ready', () => {\n          this.runEslint();\n          resolve();\n        });\n      compiler.hooks.compilation.tap(this.name, comp => {\n        this.compilation = comp;\n        this.syncErrorsAndWarnings();\n      });\n      compiler.hooks.afterCompile.tapAsync(this.name, (compilation, cb) => {\n        setTimeout(() => {\n          // eslint-disable-next-line @typescript-eslint/no-floating-promises\n          this.awaitIdle().finally(cb);\n        }, RUN_ESLINT_INTERVAL);\n      });\n    });\n  }\n\n  private runEslint(): void {\n    if (!this.shouldRun) {\n      return;\n    }\n    this.shouldRun = false;\n    const filesQueued = [...this.fileStates.entries()];\n    if (filesQueued.length === 0) {\n      return;\n    }\n\n    const eslintRunId = Math.random();\n    for (const [filePath] of filesQueued) {\n      this.fileStates.set(filePath, {status: 'in-progress', eslintRunId});\n    }\n\n    const handleError = (err: unknown): void => {\n      for (const [filePath] of filesQueued) {\n        const currentState = this.fileStates.get(filePath);\n        if (\n          !currentState ||\n          currentState.status !== 'in-progress' ||\n          currentState.eslintRunId !== eslintRunId\n        ) {\n          continue;\n        }\n        this.fileStates.set(filePath, {status: 'errored', eslintRunId, err});\n      }\n    };\n\n    try {\n      const tsConfigPath = join(this.context, 'tsconfig.json');\n      const eslint = new ESLint({\n        cwd: this.context,\n        overrideConfig: {\n          settings: {\n            'import/resolver': {\n              typescript: {\n                project: tsConfigPath,\n              },\n            },\n          },\n          parserOptions: {\n            project: tsConfigPath,\n          },\n        },\n      });\n      eslint\n        .lintFiles(filesQueued.map(e => e[0]))\n        .then(results => {\n          for (const result of results) {\n            const currentState = this.fileStates.get(result.filePath);\n            if (\n              !currentState ||\n              currentState.status !== 'in-progress' ||\n              currentState.eslintRunId !== eslintRunId\n            ) {\n              continue;\n            }\n            if (result.messages.length > 0) {\n              this.fileStates.set(result.filePath, {\n                status: 'failed',\n                eslintRunId,\n                messages: result.messages,\n              });\n            } else {\n              this.fileStates.set(result.filePath, {status: 'success', eslintRunId});\n            }\n          }\n        })\n        .catch(handleError)\n        .finally(() => {\n          this.syncErrorsAndWarnings();\n          this.checkIdle();\n        });\n    } catch (err: unknown) {\n      handleError(err);\n      this.syncErrorsAndWarnings();\n      this.checkIdle();\n    }\n  }\n\n  private syncErrorsAndWarnings(): void {\n    if (!this.compilation) {\n      return;\n    }\n\n    // Errors\n    let eslintError: EslintWebpackError | undefined;\n    for (const fileState of this.fileStates.values()) {\n      if (fileState.status === 'errored') {\n        eslintError = new EslintWebpackError(\n          fileState.eslintRunId,\n          `Failure to run ESLint:\\n${\n            fileState.err instanceof Error ? fileState.err.stack : String(fileState.err)\n          }`\n        );\n      }\n    }\n    this.compilation.errors = [\n      ...(this.compilation.errors as (EslintWebpackError | WebpackError)[]).filter(\n        w => !('eslintRunId' in w)\n      ),\n      ...(eslintError ? [eslintError] : []),\n    ];\n\n    // Warnings\n    this.compilation.warnings = [\n      ...(this.compilation.warnings as (EslintWebpackError | WebpackError)[]).filter(\n        w => !('eslintRunId' in w)\n      ),\n      ...[...this.fileStates.entries()]\n        .sort((e1, e2) => e1[0].localeCompare(e2[0]))\n        .flatMap(([filePath, fileState]) => {\n          if (fileState.status !== 'failed') {\n            return [];\n          }\n          return fileState.messages.map(\n            msg =>\n              new EslintWebpackError(\n                fileState.eslintRunId,\n                stripAnsi(msg.message),\n                filePath,\n                {\n                  start: {line: msg.line, column: msg.column},\n                  end:\n                    msg.endLine === undefined\n                      ? undefined\n                      : {line: msg.endLine, column: msg.endColumn},\n                },\n                msg.ruleId ?? undefined\n              )\n          );\n        }),\n    ];\n  }\n\n  private checkIdle(): void {\n    if (!this.resolveAwaitIdlePromise) {\n      return;\n    }\n    for (const state of this.fileStates.values()) {\n      if (state.status === 'queued' || state.status === 'in-progress') {\n        return;\n      }\n    }\n    this.resolveAwaitIdlePromise();\n  }\n\n  private async awaitIdle(): Promise<void> {\n    return new Promise<void>(resolve => {\n      this.resolveAwaitIdlePromise = resolve;\n      this.checkIdle();\n    });\n  }\n\n  protected async teardown(): Promise<void> {\n    clearInterval(this.runEslintInterval);\n    await this.watcher?.close();\n  }\n}\n\nexport function eslintPlugin(): WebpackPlugin {\n  return new EslintPlugin();\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"chokidar\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"eslint\");","const ansiRegex = new RegExp(\n  [\n    '[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:[a-zA-Z\\\\d]*(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)',\n    '(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-ntqry=><~]))',\n  ].join('|'),\n  'gu'\n);\nexport const stripAnsi = (s: string): string => s.replace(ansiRegex, '');\n","import {Compiler} from 'webpack';\n\nimport {registerExitCallback} from '@src/exit_handler';\nimport {globalError} from '@src/global_error';\n\nexport abstract class StandalonePlugin {\n  protected abstract name: string;\n  protected context: string = process.cwd();\n\n  // INITIALIZE\n\n  public apply(compiler: Compiler): void {\n    this.context = compiler.context;\n    compiler.hooks.beforeRun.tapPromise(this.name, async () => this.setupHandler(compiler));\n    compiler.hooks.watchRun.tapPromise(this.name, async () => this.setupHandler(compiler));\n    compiler.hooks.shutdown.tapPromise(this.name, async () => this.exitHandlerAsync(compiler));\n    registerExitCallback(() => this.exitHandler(compiler));\n  }\n\n  protected abstract setup(compiler: Compiler): void | Promise<void>;\n  protected abstract teardown(compiler: Compiler): void | Promise<void>;\n\n  // SETUP\n\n  private hasStarted = false;\n  private async setupHandler(compiler: Compiler): Promise<void> {\n    if (this.hasStarted) {\n      return;\n    }\n    this.hasStarted = true;\n    await this.setup(compiler);\n  }\n\n  // EXIT\n\n  private hasExited = false;\n  private exitHandler(compiler: Compiler): void {\n    if (this.hasExited) {\n      return;\n    }\n    this.hasExited = true;\n    Promise.resolve(this.teardown(compiler)).catch(err => {\n      globalError(`Error during teardown of plugin ${this.name}`, err);\n    });\n  }\n  private async exitHandlerAsync(compiler: Compiler): Promise<void> {\n    if (this.hasExited) {\n      return;\n    }\n    this.hasExited = true;\n    await this.teardown(compiler);\n  }\n}\n","import {globalError} from '@src/global_error';\n\nlet called = false;\nconst callbacks: (() => void | Promise<void>)[] = [];\n\nfunction runCallbacks(): void {\n  if (called) {\n    return;\n  }\n  called = true;\n  for (const fn of callbacks) {\n    Promise.resolve(fn()).catch(err => globalError('Failure to run exit cleanup callback', err));\n  }\n}\n\nprocess.on('beforeExit', () => runCallbacks());\nprocess.on('exit', () => runCallbacks());\nprocess.on('SIGTERM', () => runCallbacks());\nprocess.on('SIGINT', () => runCallbacks());\nprocess.on('uncaughtException', err => {\n  globalError('uncaughtException', err);\n  runCallbacks();\n});\n\nexport function registerExitCallback(cb: () => void | Promise<void>): void {\n  callbacks.push(cb);\n}\n","import {appendFileSync} from 'node:fs';\n\nimport {error} from '@src/logger';\n\nexport function globalError(...val: unknown[]): void {\n  for (const data of val) {\n    try {\n      const str =\n        typeof data === 'string'\n          ? data\n          : data instanceof Error\n            ? data.stack ?? String(data)\n            : JSON.stringify(data);\n      error(str);\n      appendFileSync('error.log', str);\n    } catch {\n      error(String(val));\n      appendFileSync('error.log', String(val));\n    }\n  }\n}\n","import {join} from 'node:path';\n\nimport ForkTsCheckerWebpackPlugin from 'fork-ts-checker-webpack-plugin';\n\nimport {WebpackPlugin} from '@src/webpack/models';\n\nexport function forkTsCheckerPlugin(context: string): WebpackPlugin {\n  return new ForkTsCheckerWebpackPlugin({\n    typescript: {\n      diagnosticOptions: {\n        syntactic: true,\n        semantic: true,\n        declaration: false,\n        global: true,\n      },\n      mode: 'readonly',\n      configFile: join(context, 'tsconfig.json'),\n    },\n    formatter: 'basic',\n    logger: {log: () => {}, error: () => {}},\n  });\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"fork-ts-checker-webpack-plugin\");","import TerserWebpackPlugin from 'terser-webpack-plugin';\n\nimport {WebpackPlugin} from '@src/webpack/models';\n\nexport function terserPlugin(): WebpackPlugin {\n  return new TerserWebpackPlugin({\n    terserOptions: {\n      format: {\n        comments: false,\n      },\n    },\n    extractComments: false,\n  });\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"terser-webpack-plugin\");","import {exec} from 'node:child_process';\nimport {appendFileSync} from 'node:fs';\nimport {join} from 'node:path';\n\nimport {Compiler} from 'webpack';\n\nimport {error} from '@src/logger';\n\nexport class YarnPlugin {\n  public apply(compiler: Compiler): void {\n    compiler.hooks.beforeRun.tapAsync('YarnPlugin', (compiler, cb) => {\n      const command = [\n        'yarn',\n        'install',\n        '--audit',\n        '--check-files',\n        '--non-interactive',\n        '--production=false',\n      ].join(' ');\n      exec(command, {cwd: compiler.context}, (err, stdout, stderr) => {\n        if (err) {\n          error(`Yarn failed in ${compiler.context}`);\n          cb(err);\n          return;\n        }\n        const warnings = stderr.split('\\n').filter(l => l.trim().length > 0);\n        if (warnings.length > 0) {\n          appendFileSync(join(compiler.context, `.yarn-warnings.log`), stderr);\n        }\n        cb();\n      });\n    });\n  }\n}\n","/* eslint-disable import/no-unassigned-import */\nimport '@babel/core';\nimport '@babel/preset-env';\nimport '@babel/preset-typescript';\nimport 'babel-loader';\nimport '@babel/preset-react';\nimport 'babel-plugin-react-remove-properties';\n\nimport {WebpackLoader} from '@src/webpack/models';\nimport {isSelenium} from '@src/webpack/utils';\n/* eslint-enable import/no-unassigned-import */\n\nexport function babelLoaderWeb(): WebpackLoader {\n  return {\n    test: /\\.tsx?$/u,\n    exclude: /\\/node_modules\\//u,\n    loader: 'babel-loader',\n    options: {\n      presets: [\n        [\n          '@babel/preset-env',\n          {\n            targets: '> 10%',\n            bugfixes: true,\n            useBuiltIns: 'usage',\n            corejs: {version: '3.10'},\n          },\n        ],\n        ['@babel/preset-react', {runtime: 'automatic'}],\n        ['@babel/preset-typescript'],\n      ],\n      plugins: isSelenium() ? [] : [['react-remove-properties', {properties: ['data-test-id']}]],\n    },\n  };\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"@babel/core\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"@babel/preset-env\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"@babel/preset-typescript\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"babel-loader\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"@babel/preset-react\");","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"babel-plugin-react-remove-properties\");","/* eslint-disable import/no-unassigned-import */\nimport '@babel/core';\nimport '@babel/preset-env';\nimport '@babel/preset-typescript';\nimport 'babel-loader';\nimport 'source-map-loader';\n\nimport {WebpackLoader} from '@src/webpack/models';\n/* eslint-enable import/no-unassigned-import */\n\nexport function sourceMapLoader(): WebpackLoader {\n  return {\n    test: /\\.js$/u,\n    use: ['source-map-loader'],\n    enforce: 'pre',\n  };\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"source-map-loader\");","import {existsSync} from 'node:fs';\nimport {join} from 'node:path';\n\nimport FaviconsWebpackPlugin from 'favicons-webpack-plugin';\n\nimport {maybeReadFileSync} from '@src/fs';\nimport {asMap, asString} from '@src/type_utils';\n\nfunction getFaviconPath(context: string): string | undefined {\n  const validExtensions = ['svg', 'png', 'jpg', 'jpeg'];\n  for (const ext of validExtensions) {\n    const faviconPath = join(context, `src/favicon.${ext}`);\n    if (existsSync(faviconPath)) {\n      return faviconPath;\n    }\n  }\n  return undefined;\n}\n\ninterface FaviconInfo {\n  appName: string;\n  locale: string;\n  background: string;\n}\n\nfunction getFaviconInfo(context: string): FaviconInfo {\n  const json = asMap(JSON.parse(maybeReadFileSync(join(context, `src/favicon.json`)) ?? '{}'), {});\n  const appName = asString(json['appName'], '');\n  const locale = asString(json['locale'], 'en_US');\n  const background = asString(json['background'], '#ffffff');\n  return {appName, locale, background};\n}\n\nexport function faviconsWebpackPlugin(\n  context: string,\n  publicUrl: string\n): FaviconsWebpackPlugin | undefined {\n  // Extract app info from favicon.json\n  const {appName, locale, background} = getFaviconInfo(context);\n\n  // Find the favicon path\n  const faviconPath = getFaviconPath(context);\n  if (faviconPath === undefined) {\n    return undefined;\n  }\n\n  const iconInfo = {\n    rotate: false,\n    offset: 10,\n    transparent: false,\n    background,\n  };\n  return new FaviconsWebpackPlugin({\n    logo: faviconPath,\n    logoMaskable: faviconPath,\n    cache: true,\n    inject: true,\n    mode: 'webapp',\n    favicons: {\n      appName,\n      appleStatusBarStyle: 'default',\n      start_url: '/',\n      lang: locale.replace('_', '-'),\n      path: `${publicUrl}/assets`,\n      background,\n      theme_color: background,\n      icons: {\n        appleIcon: iconInfo,\n        appleStartup: iconInfo,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      } as any,\n    },\n  });\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"favicons-webpack-plugin\");","function notUndefined<T>(val: T | undefined): val is T {\n  return val !== undefined;\n}\n\nexport function isString(val: unknown): val is string {\n  return typeof val === 'string';\n}\n\nexport function isNumber(val: unknown): val is number {\n  return typeof val === 'number';\n}\n\nexport function iterNumberEnum<T extends Record<string, string | number>>(e: T): T[keyof T][] {\n  return Object.values(e).filter(isNumber) as unknown as T[keyof T][];\n}\n\nexport function iterStringEnum<T extends Record<string, string>>(e: T): T[keyof T][] {\n  return Object.values(e).filter(isString) as unknown as T[keyof T][];\n}\n\nexport function removeUndefined<T>(arr: (T | undefined)[]): T[] {\n  return arr.filter(notUndefined);\n}\n\nexport function removeUndefinedOrNullProps<T extends Record<string, unknown>>(obj: T): {} {\n  return Object.fromEntries(\n    Object.entries(obj).filter(e => e[1] !== undefined && e[1] !== null)\n  ) as T;\n}\n\nexport function neverHappens(value: never, errorMessage?: string): never {\n  throw new Error(errorMessage);\n}\n\nexport type AnyInterface<T> = {[K in keyof T]: unknown};\n\nexport function asMap(value: unknown): Record<string, unknown> | undefined;\nexport function asMap(\n  value: unknown,\n  defaultValue: Record<string, unknown>\n): Record<string, unknown>;\nexport function asMap(\n  value: unknown,\n  defaultValue?: Record<string, unknown>\n): Record<string, unknown> | undefined {\n  return typeof value === 'object' && value !== null && !Array.isArray(value)\n    ? (value as Record<string, unknown>)\n    : defaultValue;\n}\nexport function asMapOrThrow(value: unknown): Record<string, unknown> {\n  const valueAsMap = asMap(value);\n  if (valueAsMap === undefined) {\n    throw new Error(`Invalid value: \\`${value}\\` is not a map`);\n  }\n  return valueAsMap;\n}\n\nexport function asJson(value: string): Record<string, unknown> | undefined;\nexport function asJson(\n  value: string,\n  defaultValue: Record<string, unknown>\n): Record<string, unknown>;\nexport function asJson(\n  value: string,\n  defaultValue?: Record<string, unknown>\n): Record<string, unknown> | undefined {\n  try {\n    const json = JSON.parse(value);\n    const res = asMap(json);\n    return res ?? defaultValue;\n  } catch {\n    return defaultValue;\n  }\n}\nexport function asJsonOrThrow(value: string): Record<string, unknown> {\n  const valueAsJson = asJson(value);\n  if (valueAsJson === undefined) {\n    throw new Error(`Invalid value: \\`${value}\\` is not a valid JSON string of a map`);\n  }\n  return valueAsJson;\n}\n\nexport function asJsonString(value: unknown): Record<string, unknown> | undefined;\nexport function asJsonString(\n  value: unknown,\n  defaultValue: Record<string, unknown>\n): Record<string, unknown>;\nexport function asJsonString(\n  value: unknown,\n  defaultValue?: Record<string, unknown>\n): Record<string, unknown> | undefined {\n  const str = asString(value);\n  return str === undefined\n    ? defaultValue\n    : defaultValue === undefined\n      ? asJson(str)\n      : asJson(str, defaultValue);\n}\nexport function asJsonStringOrThrow(value: unknown): Record<string, unknown> {\n  return asJsonOrThrow(asStringOrThrow(value));\n}\n\nexport function asString<T extends string = string>(value: unknown): T | undefined;\nexport function asString<T extends string = string>(value: unknown, defaultValue: string): T;\nexport function asString<T extends string = string>(\n  value: unknown,\n  defaultValue?: string\n): T | undefined {\n  return (typeof value === 'string' ? value : defaultValue) as T;\n}\nexport function asStringOrThrow<T extends string = string>(value: unknown): T {\n  const valueAsString = asString<T>(value);\n  if (valueAsString === undefined) {\n    throw new Error(`Invalid value: \\`${value}\\` is not a string`);\n  }\n  return valueAsString;\n}\n\nexport function asStringEnum<T extends Record<string, string>>(\n  value: unknown,\n  enu: T\n): T[keyof T] | undefined;\nexport function asStringEnum<T extends Record<string, string>>(\n  value: unknown,\n  enu: T,\n  defaultValue: T[keyof T]\n): T[keyof T];\nexport function asStringEnum<T extends Record<string, string>>(\n  value: unknown,\n  enu: T,\n  defaultValue?: T[keyof T]\n): T[keyof T] | undefined {\n  return (\n    typeof value === 'string' && Object.values(enu).includes(value as T[keyof T])\n      ? value\n      : defaultValue\n  ) as T[keyof T];\n}\nexport function asStringEnumOrThrow<T extends Record<string, string>>(\n  value: unknown,\n  enu: T\n): T[keyof T] {\n  const valueAsString = asStringEnum<T>(value, enu);\n  if (valueAsString === undefined) {\n    throw new Error(\n      `Invalid value: \\`${value}\\` is not a string or not one of ${JSON.stringify(\n        Object.values(enu)\n      )}`\n    );\n  }\n  return valueAsString;\n}\n\nexport function asArray<T = unknown>(value: unknown): T[] | undefined;\nexport function asArray<T = unknown>(value: unknown, defaultValue: unknown[]): T[];\nexport function asArray<T = unknown>(value: unknown, defaultValue?: unknown[]): T[] | undefined {\n  return (Array.isArray(value) ? value : defaultValue) as T[];\n}\nexport function asArrayOrThrow<T = unknown>(value: unknown): T[] {\n  if (!Array.isArray(value)) {\n    throw new Error(`Invalid value: \\`${value}\\` is not an array`);\n  }\n  return value as T[];\n}\n\nexport function asStringArray<T extends string = string>(value: unknown): T[] | undefined;\nexport function asStringArray<T extends string = string>(\n  value: unknown,\n  defaultValue: string[]\n): T[];\nexport function asStringArray<T extends string = string>(\n  value: unknown,\n  defaultValue?: string[]\n): T[] | undefined {\n  const arr = asArray(value);\n  if (arr === undefined) {\n    return defaultValue as T[];\n  }\n  return removeUndefined(arr.map(s => asString<T>(s)));\n}\n\nexport function asStringArrayOrThrow<T extends string = string>(value: unknown): T[] {\n  const arr = asArrayOrThrow(value);\n  return arr.map(s => asStringOrThrow<T>(s));\n}\n\nexport function asMapArray(value: unknown): Record<string, unknown>[] | undefined;\nexport function asMapArray(\n  value: unknown,\n  defaultValue: Record<string, unknown>[]\n): Record<string, unknown>[];\nexport function asMapArray(\n  value: unknown,\n  defaultValue?: Record<string, unknown>[]\n): Record<string, unknown>[] | undefined {\n  const arr = asArray(value);\n  if (arr === undefined) {\n    return defaultValue;\n  }\n  return removeUndefined(arr.map(s => asMap(s)));\n}\nexport function asMapArrayOrThrow(value: unknown): Record<string, unknown>[] {\n  const arr = asArrayOrThrow(value);\n  return arr.map(s => asMapOrThrow(s));\n}\n\nexport function asNumber<T extends number = number>(value: unknown): T | undefined;\nexport function asNumber<T extends number = number>(value: unknown, defaultValue: number): T;\nexport function asNumber<T extends number = number>(\n  value: unknown,\n  defaultValue?: number\n): T | undefined {\n  if (typeof value === 'number') {\n    return (!isNaN(value) ? value : defaultValue) as T;\n  }\n  if (typeof value === 'string') {\n    try {\n      const parsedValue = parseFloat(value);\n      return (!isNaN(parsedValue) ? parsedValue : defaultValue) as T;\n    } catch {\n      return defaultValue as T;\n    }\n  }\n  return defaultValue as T;\n}\nexport function asNumberOrThrow<T extends number = number>(value: unknown): T {\n  const valueAsNumber = asNumber(value);\n  if (valueAsNumber === undefined) {\n    throw new Error(`Invalid value: \\`${value}\\` is not a number`);\n  }\n  return valueAsNumber as T;\n}\n\nexport function asBoolean(value: unknown): boolean | undefined;\nexport function asBoolean(value: unknown, defaultValue: boolean): boolean;\nexport function asBoolean(value: unknown, defaultValue?: boolean): boolean | undefined {\n  if (typeof value === 'boolean') {\n    return value;\n  }\n  if (typeof value === 'number') {\n    return !isNaN(value) ? value !== 0 : false;\n  }\n  if (typeof value === 'string') {\n    if (value === '0' || value === 'false') {\n      return false;\n    } else if (value === '1' || value === 'true') {\n      return true;\n    }\n    return defaultValue;\n  }\n  return defaultValue;\n}\n\nexport function asBooleanOrThrow(value: unknown): boolean {\n  const valueAsBoolean = asBoolean(value);\n  if (valueAsBoolean === undefined) {\n    throw new Error(`Invalid value: \\`${value}\\` is not a boolean`);\n  }\n  return valueAsBoolean;\n}\n\nconst TIMESTAMP_REGEX = /^[0-9]{1,15}$/u;\nexport function asDate(value: unknown): Date | undefined;\nexport function asDate(value: unknown, defaultValue: Date): Date;\nexport function asDate(value: unknown, defaultValue?: Date): Date | undefined {\n  const date =\n    value instanceof Date\n      ? value\n      : new Date(\n          typeof value === 'string' && TIMESTAMP_REGEX.test(value)\n            ? parseFloat(value)\n            : String(value)\n        );\n  return isNaN(date.getTime()) ? defaultValue : date;\n}\n\nexport function asDateOrThrow(value: unknown): Date {\n  const valueAsDate = asDate(value);\n  if (valueAsDate === undefined) {\n    throw new Error(`Invalid value: \\`${value}\\` cannot be parsed as a Date`);\n  }\n  return valueAsDate;\n}\n\n// export function asDate(value: unknown): Date | undefined;\n// export function asDate(value: unknown, defaultValue: Date): Date;\n// export function asDate(value: unknown, defaultValue?: Date): Date | undefined {\n//   if (typeof value === 'number') {\n//     return new Date(value);\n//   }\n//   return value instanceof Date ? value : defaultValue;\n// }\n\nexport function isNull<T>(val: T | null): val is null {\n  return val === null;\n}\n\nexport function asError(err: unknown): Error {\n  return err instanceof Error ? err : new Error(typeof err === 'string' ? err : String(err));\n}\n\nexport function errorAsString(err: unknown): string {\n  const errorMap = asMap(err);\n  if (errorMap === undefined) {\n    return asString(err) ?? String(err);\n  }\n\n  const errorMessage = asString(errorMap['message']);\n  if (errorMessage === undefined) {\n    return String(err);\n  }\n  return errorMessage;\n}\n\nexport function errorAndStackAsString(err: unknown): string {\n  const errorMap = asMap(err);\n  if (errorMap === undefined) {\n    return asString(err) ?? String(err);\n  }\n\n  const stack = asString(errorMap['stack']);\n  if (stack === undefined) {\n    return String(err);\n  }\n  return stack;\n}\n\nexport function asConstantOrThrow<T>(value: unknown, expected: T): T {\n  if (value !== expected) {\n    throw new Error(`Invalid value: \\`${value}\\`, expected \\`${expected}\\``);\n  }\n  return value as T;\n}\n\n// export function asParsedJson<T>(json: string): T {\n//   try {\n//     return JSON.parse(json) as T;\n//   } catch {\n//     const defaultValue = {};\n//     return defaultValue as T;\n//   }\n// }\nexport function parseJson(\n  json: string\n): {res: unknown; err: undefined} | {res: undefined; err: unknown} {\n  try {\n    return {res: JSON.parse(json), err: undefined};\n  } catch (err: unknown) {\n    return {err, res: undefined};\n  }\n}\nexport type Brand<Type, Name> = Type & {__brand: Name};\nexport type StringBrand = string & {__brand: string};\nexport type NumberBrand = number & {__brand: number};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type AnyBrand = (string | number) & {__brand: any};\n\nexport type Untrusted<T> = T extends\n  | Function\n  | Date\n  | boolean\n  | number\n  | string\n  | undefined\n  | null\n  | unknown[]\n  ? unknown\n  : {[P in keyof T]?: Untrusted<T[P]>};\n\nexport type DeepPartial<T> = T extends\n  | Function\n  | Date\n  | boolean\n  | number\n  | string\n  | undefined\n  | null\n  | unknown[]\n  ? T\n  : {[P in keyof T]?: DeepPartial<T[P]>};\n\nexport type MapInterface<I, Type> = {[Key in keyof I]: Type};\n// Get all the keys of a type including the optional attributes\ntype NonHomomorphicKeys<T> = ({[P in keyof T]: P} & None)[keyof T];\nexport type MapInterfaceStrict<I, Type> = {[Key in NonHomomorphicKeys<I>]: Type};\n\ntype KeysOfType<T, Type> = {[Key in keyof T]: T[Key] extends Type ? Key : never}[keyof T];\nexport type RestrictInterface<T, Type> = Pick<T, KeysOfType<T, Type>>;\n\ninterface RecursiveArray<T> extends Array<T | RecursiveArray<T>> {}\nexport type NestedArray<T> = (T | RecursiveArray<T>)[];\n\n// Type for an empty object (ie: {})\nexport type None = Record<string, never>;\n\nexport type NonEmptyArray<T> = [T, ...T[]];\nexport function isNonEmptyArray<T>(val: T[]): val is NonEmptyArray<T> {\n  return val.length > 0;\n}\nexport function nonEmptyArray<T>(val: T[]): NonEmptyArray<T> | undefined {\n  return val.length === 0 ? undefined : (val as NonEmptyArray<T>);\n}\n\nexport type AddPrefix<T, P extends string> = {\n  [K in keyof T as K extends string ? `${P}${K}` : never]: T[K];\n};\nexport function addPrefix<T extends Record<string, unknown>, Prefix extends string>(\n  attr: T,\n  prefix: Prefix\n): AddPrefix<T, Prefix> {\n  return Object.fromEntries(\n    Object.entries(attr).map(([key, value]) => [`${prefix}${key}`, value])\n  ) as AddPrefix<T, Prefix>;\n}\n\nexport type WithNull<T> = {\n  [Key in keyof T]: T[Key] extends Exclude<T[Key], undefined> ? T[Key] : T[Key] | null;\n};\ntype Id<T> = T;\nexport type Flatten<T> = Id<{[k in keyof T]: T[k]}>;\n\nexport type Defined<T> = Exclude<T, undefined>;\n","import {join} from 'node:path';\n\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\n\nimport {WebpackPlugin} from '@src/webpack/models';\nimport {isProd} from '@src/webpack/utils';\n\nexport function htmlPlugin(context: string, publicUrl: string): WebpackPlugin {\n  return new HtmlWebpackPlugin({\n    template: join(context, 'src/index.html'),\n    publicPath: publicUrl,\n    minify: isProd(),\n  });\n}\n","module.exports = __WEBPACK_EXTERNAL_createRequire(import.meta.url)(\"html-webpack-plugin\");","import {appendFileSync} from 'node:fs';\nimport {join} from 'node:path';\n\nimport {Configuration} from 'webpack-dev-server';\n\nimport {error} from '@src/logger';\nimport {getPort, initLogFile} from '@src/webpack/utils';\n\nexport interface WebpackDevServerStartEvent {\n  event: 'start';\n  port: number;\n}\n\nexport type WebpackDevServerEvent = WebpackDevServerStartEvent;\nexport type FullWebpackDevServerEvent = {t: string} & WebpackDevServerEvent;\n\nexport function webpackDevServer(context: string): Configuration {\n  const port = getPort(context);\n\n  let logFile: string | undefined;\n  let logsSaved: WebpackDevServerEvent[] = [];\n  initLogFile(context, 'webpack_dev_server.txt')\n    .then(file => {\n      logFile = file;\n      for (const logEvent of logsSaved) {\n        log(logEvent);\n      }\n      logsSaved = [];\n    })\n    .catch(error);\n  function log(event: WebpackDevServerEvent): void {\n    if (logFile === undefined) {\n      logsSaved.push(event);\n    } else {\n      appendFileSync(logFile, `${JSON.stringify({t: new Date().toISOString(), ...event})}\\n`);\n    }\n  }\n\n  return {\n    static: join(context, 'dist'),\n    compress: true,\n    hot: true,\n    port,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, PATCH, OPTIONS',\n      'Access-Control-Allow-Headers': 'X-Requested-With, content-type, Authorization',\n    },\n    client: {\n      logging: 'none',\n      overlay: false,\n    },\n    devMiddleware: {\n      writeToDisk: true,\n    },\n    onListening: () => log({event: 'start', port}),\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {Configuration} from 'webpack';\n\nimport {webConfig} from '@src/webpack/common-configs/web_config';\n\nexport function config(opts: Parameters<typeof webConfig>[0]): Configuration {\n  return webConfig(opts);\n}\n"],"names":["readFileSync","basename","join","baseConfig","babelLoaderWeb","sourceMapLoader","faviconsWebpackPlugin","htmlPlugin","webpackDevServer","isProd","webConfig","opts","context","watch","base","envVariableFilePath","domainNameEnvVariable","toUpperCase","match","RegExp","exec","toString","domainName","publicUrl","target","entry","main","output","path","filename","clean","publicPath","module","rules","resolve","extensions","modules","alias","plugins","devServer","undefined","optimization","splitChunks","cacheGroups","vendor","test","chunks","name","enforce","definePlugin","eslintPlugin","forkTsCheckerPlugin","terserPlugin","YarnPlugin","mode","devtool","stats","infrastructureLogging","level","minimize","minimizer","experiments","backCompat","webpack","getEnv","envPrefix","extraEnv","Object","fromEntries","entries","process","env","filter","startsWith","map","value","String","slice","length","JSON","stringify","DefinePlugin","createHash","mkdir","readdir","readFile","rm","stat","exists","rmDir","log","isSelenium","packageJsonCache","Map","findPackageJson","p","has","get","pStat","isDirectory","dir","includes","fileContent","json","parse","set","res","err","getPort","hexHash","update","digest","port","Math","floor","parseInt","initLogFile","logFileName","root","lookupRoot","logDir","recursive","logFile","Error","fromPath","parent","promises","dirname","format","access","readFileInternal","writeFile","buffer","prettierConfig","parser","printWidth","singleQuote","trailingComma","bracketSpacing","arrowParens","endOfLine","prettierFormat","str","writeRawFile","content","prettyJson","compact","writeJsonFile","prettyJs","js","writeJsFile","prettyTs","ts","writeTsFile","writeRawFileIfNotExists","dirPath","force","cleanDir","cp","from","to","Promise","reject","maybeReadFile","maybeReadFileSync","listFiles","files","ents","withFileTypes","ent","entPath","push","then","subFiles","isFile","all","error","console","existsSync","readdirSync","ESLint","WebpackError","stripAnsi","StandalonePlugin","EslintWebpackError","constructor","eslintRunId","message","filePath","loc","ruleId","file","RUN_ESLINT_INTERVAL","EslintPlugin","fileStates","shouldRun","setup","compiler","runEslintInterval","setInterval","runEslint","projectPath","workspacePath","workspaceDirs","e","patterns","flatMap","pattern","watcher","on","status","delete","hooks","compilation","tap","comp","syncErrorsAndWarnings","afterCompile","tapAsync","cb","setTimeout","awaitIdle","finally","filesQueued","random","handleError","currentState","tsConfigPath","eslint","cwd","overrideConfig","settings","typescript","project","parserOptions","lintFiles","results","result","messages","catch","checkIdle","eslintError","fileState","values","stack","errors","w","warnings","sort","e1","e2","localeCompare","msg","start","line","column","end","endLine","endColumn","resolveAwaitIdlePromise","state","teardown","_this$watcher","clearInterval","close","ansiRegex","s","replace","registerExitCallback","globalError","apply","beforeRun","tapPromise","setupHandler","watchRun","shutdown","exitHandlerAsync","exitHandler","hasStarted","hasExited","called","callbacks","runCallbacks","fn","appendFileSync","val","data","ForkTsCheckerWebpackPlugin","diagnosticOptions","syntactic","semantic","declaration","global","configFile","formatter","logger","TerserWebpackPlugin","terserOptions","comments","extractComments","command","stdout","stderr","split","l","trim","exclude","loader","options","presets","targets","bugfixes","useBuiltIns","corejs","version","runtime","properties","use","FaviconsWebpackPlugin","asMap","asString","getFaviconPath","validExtensions","ext","faviconPath","getFaviconInfo","appName","locale","background","iconInfo","rotate","offset","transparent","logo","logoMaskable","cache","inject","favicons","appleStatusBarStyle","start_url","lang","theme_color","icons","appleIcon","appleStartup","notUndefined","isString","isNumber","iterNumberEnum","iterStringEnum","removeUndefined","arr","removeUndefinedOrNullProps","obj","neverHappens","errorMessage","defaultValue","Array","isArray","asMapOrThrow","valueAsMap","asJson","asJsonOrThrow","valueAsJson","asJsonString","asJsonStringOrThrow","asStringOrThrow","valueAsString","asStringEnum","enu","asStringEnumOrThrow","asArray","asArrayOrThrow","asStringArray","asStringArrayOrThrow","asMapArray","asMapArrayOrThrow","asNumber","isNaN","parsedValue","parseFloat","asNumberOrThrow","valueAsNumber","asBoolean","asBooleanOrThrow","valueAsBoolean","TIMESTAMP_REGEX","asDate","date","Date","getTime","asDateOrThrow","valueAsDate","isNull","asError","errorAsString","errorMap","errorAndStackAsString","asConstantOrThrow","expected","parseJson","isNonEmptyArray","nonEmptyArray","addPrefix","attr","prefix","key","HtmlWebpackPlugin","template","minify","logsSaved","logEvent","event","t","toISOString","static","compress","hot","headers","client","logging","overlay","devMiddleware","writeToDisk","onListening","config"],"sourceRoot":""}